{"version":3,"sources":["constants.js","components/Home.js","store.js","hooks/useFormInput.js","components/Dashboard.js","hooks/useSelectInput.js","toaster.js","components/ReviewerManager.js","hooks/useTagInput.js","components/Composer.js","hooks/useMedia.js","hooks/useDateInput.js","accessToken.js","components/Login.js","components/Signup.js","components/OrgSignup.js","components/Admin.js","components/OrgJoin.js","components/Nav.js","components/OrgCreate.js","App.js","serviceWorker.js","index.js","utils/index.js"],"names":["module","exports","BASE_URL","Home","initialState","user","store","createContext","Provider","StateProvider","children","useReducer","state","action","console","log","type","actions","SET_USER","payload","CLEAR_USER","Error","dispatch","value","useFormInput","initialValue","useState","setValue","hasError","setHasError","helperText","setHelperText","clearError","onChange","e","target","clear","setError","msg","Dashboard","orgName","useParams","drafts","setDrafts","history","useHistory","useContext","search","loading","setLoading","authorized","setAuthorized","orderBy","event","currentTarget","useSelectInput","useEffect","axios","get","then","response","data","catch","err","message","finally","destination","style","width","position","top","left","transform","intent","Intent","PRIMARY","padding","marginBottom","placeholder","options","overflow","bordered","interactive","minWidth","sort","a","b","aVers","versions","length","bVers","modifiedDate","sendDate","map","draft","id","latestVersion","containsSearch","elem","toLowerCase","includes","tags","some","subject","to","commitMessage","creator","firstName","passesFilter","onClick","_id","push","key","lastName","textAlign","Date","toLocaleDateString","recipient","index","minimal","margin","parseInt","tag","reviewers","reviewer","approved","SUCCESS","DANGER","reduce","acc","curr","sent","icon","title","marginLeft","username","text","disabled","AppToaster","Toaster","create","className","Position","TOP","ReviewerManager","updated","setUpdated","isOpen","setIsOpen","members","Suggest","tmpMembers","setTempMembers","reviewerIds","JSON","stringify","filter","member","checked","utils","searchToJSON","window","location","draftId","post","show","usePortal","canEscapeKeyClose","onClose","Classes","DIALOG_BODY","label","tmp","DIALOG_FOOTER","DIALOG_FOOTER_ACTIONS","useTagInput","initialValues","values","setValues","set","add","Composer","columnCount","queries","defaultValue","mediaQueryLists","q","matchMedia","getValue","findIndex","mql","matches","handler","forEach","addListener","removeListener","useMedia","setVersions","from","initialDate","date","useDateInput","cc","bcc","RichTextEditor","createEmptyValue","body","setBody","setDraft","canEdit","setCanEdit","currVersion","setCurrVersion","comment","comments","setComments","setVersionData","EditorValue","createFromString","toString","content","version","result","jsonSearch","res","versionNumber","tmpVersions","i","setMembers","approve","reject","users","concat","admins","containerStyle","display","gridTemplateColumns","gridTemplateRows","inputStyle","border","columnGap","borderRadius","height","src","alt","verticalAlign","small","marginTop","gridTemplateAreas","gridArea","author","growVertically","fill","substring","viewingVersion","formatDate","parseDate","str","popoverProps","BOTTOM","maxDate","rightElement","addOnBlur","tagProps","editorClassName","minHeight","spellCheck","leftIcon","accessToken","setAccessToken","token","Login","password","showPassword","setShowPassword","redirect","withCredentials","status","lockButton","WARNING","marginRight","Signup","email","OrgSignup","stepNum","setStepNum","signupData","orgData","name","organization","setTimeout","messsage","changeStepNum","next","errorMessage","trim","Admin","setUsers","setAdmins","isAdmin","OrgJoin","replace","patch","Nav","organizations","setOrganizations","goto","align","Alignment","LEFT","modifiers","arrow","enabled","rightIcon","BOTTOM_RIGHT","MINIMAL","RIGHT","BOTTOM_LEFT","App","interval","setInterval","clearInterval","NONE","path","exact","component","OrgCreate","Boolean","hostname","match","interceptors","request","use","config","headers","error","Promise","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","getJWT","localStorage","getItem","getJWTConfig","Authorization","setJWT","setItem","parse","decodeURI"],"mappings":"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","file":"static/js/main.75c5614f.chunk.js","sourcesContent":["module.exports = {\r\n    BASE_URL: process.env.NODE_ENV === \"production\" ? \"https://followup.api.garethdev.space\" : \"\",\r\n}","import React from 'react';\r\n\r\nexport default function Home() {\r\n    return (\r\n        <div>\r\n            Emaily\r\n        </div>\r\n    )\r\n}","import React, { createContext, useReducer } from \"react\";\r\n\r\nconst initialState = {\r\n  user: null,\r\n};\r\nconst store = createContext(initialState);\r\nconst { Provider } = store;\r\n\r\nconst StateProvider = ({ children }) => {\r\n  const [state, dispatch] = useReducer((state, action) => {\r\n    console.log(action);\r\n    switch (action.type) {\r\n      case actions.SET_USER:\r\n        return { ...state, user: action.payload };\r\n      case actions.CLEAR_USER:\r\n        return { ...state, user: null };\r\n      default:\r\n        throw new Error();\r\n    }\r\n  }, initialState);\r\n\r\n  return <Provider value={{ state, dispatch }}>{children}</Provider>;\r\n};\r\n\r\nconst actions = {\r\n  SET_USER: \"SET_USER\",\r\n  CLEAR_USER: \"CLEAR_USER\",\r\n};\r\n\r\nexport { store, StateProvider, actions };","import { useState } from \"react\";\r\n\r\nconst useFormInput = (initialValue) => {\r\n  const [value, setValue] = useState(initialValue);\r\n  const [hasError, setHasError] = useState(false);\r\n  const [helperText, setHelperText] = useState(\"\");\r\n\r\n  function setError(msg) {\r\n    setHasError(true);\r\n    setHelperText(msg);\r\n  }\r\n\r\n  function clearError() {\r\n    setHasError(false);\r\n    setHelperText(\"\");\r\n  }\r\n\r\n  function handleChange(e) {\r\n    clearError();\r\n    setValue(e.target.value);\r\n  }\r\n\r\n  function clear() {\r\n    setValue(\"\");\r\n  }\r\n  return {\r\n    value: value,\r\n    setValue: setValue,\r\n    onChange: handleChange,\r\n    clear: clear,\r\n    hasError: hasError,\r\n    helperText: helperText,\r\n    setError: setError,\r\n    clearError: clearError,\r\n  };\r\n};\r\n\r\nexport default useFormInput;\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\nimport {\r\n  Tag,\r\n  ControlGroup,\r\n  HTMLSelect,\r\n  Code,\r\n  Button,\r\n  Spinner,\r\n  Callout,\r\n  Intent,\r\n  HTMLTable,\r\n  InputGroup,\r\n} from \"@blueprintjs/core\";\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { BASE_URL } from \"../constants\";\r\nimport { store } from \"../store\";\r\nimport useFormInput from \"../hooks/useFormInput\";\r\nimport useSelectInput from \"../hooks/useSelectInput\";\r\n\r\nexport default function Dashboard() {\r\n  const { orgName } = useParams();\r\n  const [drafts, setDrafts] = useState([]);\r\n  const history = useHistory();\r\n  const { state } = useContext(store);\r\n  const search = useFormInput(\"\");\r\n  const [loading, setLoading] = useState(true);\r\n  const [authorized, setAuthorized] = useState(false);\r\n  const orderBy = useSelectInput(\"Modified Date - ASC\");\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .get(`${BASE_URL}/api/v1/organization/${orgName}/drafts`)\r\n      .then((response) => {\r\n        // console.log(response);\r\n        setDrafts(response.data.drafts);\r\n        setAuthorized(true);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err.message);\r\n        setAuthorized(false);\r\n      })\r\n      .finally(() => {\r\n        setLoading(false);\r\n      });\r\n  }, [orgName]);\r\n\r\n  function edit(id) {\r\n    return function () {\r\n      history.push(`/${orgName}/compose?draftId=${id}`);\r\n    };\r\n  }\r\n\r\n  function handleQueryChange(e) {\r\n    search.onChange(e);\r\n  }\r\n\r\n  const goto = (destination) => () => {\r\n    history.push(destination);\r\n  };\r\n\r\n  function passesFilter(draft) {\r\n    let latestVersion =\r\n      draft.versions.length > 0\r\n        ? draft.versions[draft.versions.length - 1]\r\n        : null;\r\n\r\n    function containsSearch(elem) {\r\n      return elem.toLowerCase().includes(search.value.toLowerCase());\r\n    }\r\n\r\n    return (\r\n      (latestVersion && latestVersion.tags.some(containsSearch)) ||\r\n      (latestVersion &&\r\n        latestVersion.subject\r\n          .toLowerCase()\r\n          .includes(search.value.toLowerCase())) ||\r\n      (latestVersion && latestVersion.to.some(containsSearch)) ||\r\n      (latestVersion &&\r\n        latestVersion.commitMessage\r\n          .toLowerCase()\r\n          .includes(search.value.toLowerCase())) ||\r\n      draft.creator.firstName.toLowerCase().includes(search.value.toLowerCase())\r\n    );\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <div\r\n        style={{\r\n          width: \"min-content\",\r\n          position: \"absolute\",\r\n          top: \"50%\",\r\n          left: \"50%\",\r\n          transform: \"translate(-50%, -50%)\",\r\n        }}\r\n      >\r\n        <Spinner intent={Intent.PRIMARY} />\r\n      </div>\r\n    );\r\n  }\r\n  if (!authorized) {\r\n    return (\r\n      <div\r\n        style={{\r\n          width: \"min-content\",\r\n          position: \"absolute\",\r\n          top: \"50%\",\r\n          left: \"50%\",\r\n          transform: \"translate(-50%, -50%)\",\r\n        }}\r\n      >\r\n        <Callout icon=\"disable\" title=\"Not authorized\">\r\n          <div style={{ width: \"350px\" }}>\r\n            {state.user ? (\r\n              <>\r\n                <p>\r\n                  You're not a member of this organization. Want in? Ask for\r\n                  access or switch to an account with permission.\r\n                </p>\r\n                <p>\r\n                  Currently logged in as:{\" \"}\r\n                  <Code style={{ marginLeft: \"5px\" }}>\r\n                    {state.user.username}\r\n                  </Code>\r\n                </p>\r\n                <Button\r\n                  intent={Intent.PRIMARY}\r\n                  text=\"Request Access\"\r\n                  disabled\r\n                />\r\n              </>\r\n            ) : (\r\n              <>\r\n                <p style={{ width: \"350px\" }}>\r\n                  You're currently not logged in. You must be logged in to\r\n                  continue.{\" \"}\r\n                </p>\r\n                <Button\r\n                  intent={Intent.PRIMARY}\r\n                  onClick={goto(`/login?redirect=/${orgName}/dashboard`)}\r\n                  text=\"Log in\"\r\n                />\r\n              </>\r\n            )}\r\n          </div>\r\n        </Callout>\r\n      </div>\r\n    );\r\n  }\r\n  return (\r\n    <div style={{ padding: \"20px\" }}>\r\n      <div style={{ width: \"250px\", marginBottom: \"20px\" }}>\r\n        <ControlGroup>\r\n          <InputGroup\r\n            onChange={handleQueryChange}\r\n            value={search.value}\r\n            placeholder=\"I'm looking for...\"\r\n          />\r\n          <HTMLSelect\r\n            options={[\r\n              \"Send Date - ASC\",\r\n              \"Send Date - DESC\",\r\n              \"Modified Date - ASC\",\r\n              \"Modified Date - DESC\",\r\n            ]}\r\n            onChange={orderBy.onChange}\r\n            value={orderBy.value}\r\n          />\r\n        </ControlGroup>\r\n      </div>\r\n\r\n      <div style={{ overflow: \"auto\" }}>\r\n        <HTMLTable bordered interactive>\r\n          <thead>\r\n            <tr>\r\n              <th style={{ minWidth: \"150px\" }}>Creator</th>\r\n              <th style={{ minWidth: \"100px\" }}>Versions</th>\r\n              <th style={{ minWidth: \"100px\" }}>Send Date</th>\r\n              <th style={{ minWidth: \"250px\" }}>To</th>\r\n              <th style={{ minWidth: \"250px\" }}>Subject</th>\r\n              <th style={{ minWidth: \"125px\" }}>Last Modified</th>\r\n              <th style={{ minWidth: \"250px\" }}>Latest Commit Message</th>\r\n              <th style={{ minWidth: \"250px\" }}>Tags</th>\r\n              <th style={{ minWidth: \"150px\" }}>Reviewers</th>\r\n              <th style={{ minWidth: \"150px\" }}>Approvals</th>\r\n              <th style={{ minWidth: \"100px\" }}>Status</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {drafts\r\n              .sort((a, b) => {\r\n                let aVers =\r\n                  a.versions.length > 0\r\n                    ? a.versions[a.versions.length - 1]\r\n                    : null;\r\n                let bVers =\r\n                  b.versions.length > 0\r\n                    ? b.versions[b.versions.length - 1]\r\n                    : null;\r\n\r\n                if (orderBy.value === \"Modified Date - ASC\") {\r\n                  if (!aVers && !bVers) return 0;\r\n                  else if (!bVers) return 1;\r\n                  else if (!aVers) return -1;\r\n                  else {\r\n                    return aVers.modifiedDate >= bVers.modifiedDate ? -1 : 1;\r\n                  }\r\n                } else if (orderBy.value === \"Modified Date - DESC\") {\r\n                  if (!aVers && !bVers) return 0;\r\n                  else if (!bVers) return -1;\r\n                  else if (!aVers) return 1;\r\n                  else {\r\n                    return aVers.modifiedDate >= bVers.modifiedDate ? 1 : -1;\r\n                  }\r\n                } else if (orderBy.value === \"Send Date - ASC\") {\r\n                  if (!aVers && !bVers) return 0;\r\n                  else if (!bVers) return 1;\r\n                  else if (!aVers) return -1;\r\n                  else {\r\n                    return aVers.sendDate >= bVers.sendDate ? -1 : 1;\r\n                  }\r\n                } else if (orderBy.value === \"Send Date - DESC\") {\r\n                  if (!aVers && !bVers) return 0;\r\n                  else if (!bVers) return -1;\r\n                  else if (!aVers) return 1;\r\n                  else {\r\n                    return aVers.sendDate >= bVers.sendDate ? 1 : -1;\r\n                  }\r\n                }\r\n              })\r\n              .map((draft) => {\r\n                let latestVersion =\r\n                  draft.versions.length > 0\r\n                    ? draft.versions[draft.versions.length - 1]\r\n                    : null;\r\n                if (passesFilter(draft)) {\r\n                  return (\r\n                    <tr onClick={edit(draft._id)} key={draft._id}>\r\n                      <td>\r\n                        {draft.creator.firstName + \" \" + draft.creator.lastName}\r\n                      </td>\r\n                      <td style={{ textAlign: \"center\" }}>\r\n                        {draft.versions.length}\r\n                      </td>\r\n\r\n                      <td>\r\n                        {latestVersion &&\r\n                          new Date(latestVersion.sendDate).toLocaleDateString()}\r\n                      </td>\r\n\r\n                      <td>\r\n                        {latestVersion &&\r\n                          latestVersion.to.map((recipient, index) => (\r\n                            <Tag\r\n                              minimal\r\n                              key={index}\r\n                              style={{ margin: \"0px 5px 5px 0px\" }}\r\n                            >\r\n                              {recipient}\r\n                            </Tag>\r\n                          ))}\r\n                      </td>\r\n\r\n                      <td>{latestVersion ? latestVersion.subject : \"\"}</td>\r\n\r\n                      <td style={{ textAlign: \"center\" }}>\r\n                        {latestVersion\r\n                          ? new Date(\r\n                              parseInt(latestVersion.modifiedDate)\r\n                            ).toLocaleDateString()\r\n                          : \"N/A\"}\r\n                      </td>\r\n\r\n                      <td>{latestVersion && latestVersion.commitMessage}</td>\r\n\r\n                      <td>\r\n                        {latestVersion &&\r\n                          latestVersion.tags.map((tag, index) => (\r\n                            <Tag\r\n                              minimal\r\n                              key={index}\r\n                              style={{ margin: \"0px 5px 5px 0px\" }}\r\n                            >\r\n                              {tag}\r\n                            </Tag>\r\n                          ))}\r\n                      </td>\r\n\r\n                      <td>\r\n                        {draft.reviewers.map((reviewer) => {\r\n                          return (\r\n                            <Tag\r\n                              key={reviewer.id}\r\n                              style={{ margin: \"0px 5px 5px 0px\" }}\r\n                              intent={\r\n                                reviewer.approved\r\n                                  ? Intent.SUCCESS\r\n                                  : Intent.DANGER\r\n                              }\r\n                              minimal={\r\n                                !state.user || reviewer.id !== state.user._id\r\n                              }\r\n                            >\r\n                              {reviewer.firstName[0] + reviewer.lastName[0]}\r\n                            </Tag>\r\n                          );\r\n                        })}\r\n                      </td>\r\n\r\n                      <td style={{ textAlign: \"center\" }}>\r\n                        {draft.reviewers.reduce((acc, curr) => {\r\n                          if (curr.approved) acc++;\r\n                          return acc;\r\n                        }, 0)}\r\n                        / {draft.reviewers.length}\r\n                      </td>\r\n\r\n                      <td>{draft.sent ? \"Sent\" : \"Not Sent\"}</td>\r\n                    </tr>\r\n                  );\r\n                } else return null;\r\n              })}\r\n          </tbody>\r\n        </HTMLTable>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useState } from \"react\";\r\n\r\nexport default function useSelectInput(initialValue) {\r\n  const [value, setValue] = useState(initialValue);\r\n\r\n  function onChange(event) {\r\n    setValue(event.currentTarget.value);\r\n  }\r\n\r\n  return {\r\n    value,\r\n    onChange,\r\n  };\r\n}\r\n","import { Position, Toaster } from \"@blueprintjs/core\";\r\n\r\n/** Singleton toaster instance. Create separate instances for different options. */\r\nexport const AppToaster = Toaster.create({\r\n  className: \"recipe-toaster\",\r\n  position: Position.TOP,\r\n});\r\n","import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  Dialog,\r\n  Classes,\r\n  MenuItem,\r\n  AnchorButton,\r\n  Button,\r\n  Intent,\r\n  HTMLSelect,\r\n  Checkbox,\r\n} from \"@blueprintjs/core\";\r\nimport { Suggest } from \"@blueprintjs/select\";\r\nimport utils from \"../utils\";\r\nimport { BASE_URL } from \"../constants\";\r\nimport axios from \"axios\";\r\nimport { AppToaster } from \"../toaster\";\r\n\r\nexport default function ReviewerManager({\r\n  updated,\r\n  setUpdated,\r\n  isOpen,\r\n  setIsOpen,\r\n  members,\r\n  reviewers,\r\n}) {\r\n  const ReviewerSuggest = Suggest;\r\n\r\n  const [tmpMembers, setTempMembers] = useState([]);\r\n\r\n  async function saveReviewers() {\r\n    let data = {\r\n      reviewerIds: JSON.stringify(\r\n        tmpMembers\r\n          .filter((member) => member.checked)\r\n          .map((member) => member._id)\r\n      ),\r\n    };\r\n    let { draftId } = utils.searchToJSON(window.location.search);\r\n\r\n    try {\r\n      let result = await axios.post(\r\n        `${BASE_URL}/api/v1/draft/${draftId}/reviewer`,\r\n        data\r\n      );\r\n      // console.log(result);\r\n      setIsOpen(false);\r\n      AppToaster.show({\r\n        message: \"Succesfully updated reviewers\",\r\n        intent: Intent.SUCCESS,\r\n      });\r\n      setUpdated(updated + 1);\r\n    } catch (err) {\r\n      AppToaster.show({\r\n        message: err.message,\r\n        intent: Intent.DANGER,\r\n      });\r\n    }\r\n  }\r\n  const toggleCheck = (_id) => (event) => {\r\n    let tmp = tmpMembers.map((member) => {\r\n      if (member._id === _id) {\r\n        member.checked = event.target.checked;\r\n      }\r\n      return member;\r\n    });\r\n    setTempMembers(tmp);\r\n  };\r\n\r\n  useEffect(() => {\r\n    setTempMembers(\r\n      members.map((member) => {\r\n        return {\r\n          ...member,\r\n          checked: reviewers\r\n            .map((reviewer) => reviewer.id)\r\n            .includes(member._id),\r\n        };\r\n      })\r\n    );\r\n  }, [reviewers, members]);\r\n\r\n  return (\r\n    <Dialog\r\n      isOpen={isOpen}\r\n      usePortal={true}\r\n      canEscapeKeyClose={true}\r\n      title={\"Add reviewer\"}\r\n      onClose={() => setIsOpen(false)}\r\n    >\r\n      <div className={Classes.DIALOG_BODY}>\r\n        {tmpMembers.map((member) => {\r\n          return (\r\n            <Checkbox\r\n              label={`${member.firstName} ${member.lastName}`}\r\n              checked={member.checked}\r\n              onChange={toggleCheck(member._id)}\r\n            />\r\n          );\r\n        })}\r\n      </div>\r\n      <div className={Classes.DIALOG_FOOTER}>\r\n        <div className={Classes.DIALOG_FOOTER_ACTIONS}>\r\n          <Button onClick={() => setIsOpen(false)}>Close</Button>\r\n\r\n          <AnchorButton onClick={saveReviewers} intent={Intent.PRIMARY}>\r\n            Save\r\n          </AnchorButton>\r\n        </div>\r\n      </div>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\n/*\r\n\r\n        <ReviewerSuggest\r\n          onItemSelect={(item) => console.log(item)}\r\n          items={[\r\n            { name: \"Gareth Lau\", email: \"gareth@mail.com\" },\r\n            { name: \"John Doe\", email: \"Johndoe@mail.com\" },\r\n          ]}\r\n          inputValueRenderer={(item) => item.name}\r\n          itemRenderer={(item, { handleClick, modifiers, query }) => {\r\n            return <MenuItem onClick={handleClick} text={item.name} />;\r\n          }}\r\n          onQueryChange={(query) => console.log(query)}\r\n        />\r\n\r\n */\r\n","import { useState } from \"react\";\r\n\r\nexport default function useTagInput(initialValues) {\r\n  const [values, setValues] = useState(initialValues || []);\r\n\r\n  function clear() {\r\n    setValues([]);\r\n  }\r\n\r\n  function add(tag) {\r\n    setValues([...values, tag]);\r\n  }\r\n\r\n  function set(tags) {\r\n    setValues(tags);\r\n  }\r\n  function onChange(tags) {\r\n    setValues(tags);\r\n  }\r\n  return {\r\n    values,\r\n    clear,\r\n    set,\r\n    add,\r\n    onChange,\r\n  };\r\n}\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\nimport useMedia from \"../hooks/useMedia\";\r\nimport ReviewerManager from \"./ReviewerManager\";\r\nimport { AppToaster } from \"../toaster\";\r\n\r\nimport {\r\n  Intent,\r\n  InputGroup,\r\n  HTMLSelect,\r\n  TagInput,\r\n  Button,\r\n  Card,\r\n  TextArea,\r\n  Divider,\r\n  Dialog,\r\n  Classes,\r\n  AnchorButton,\r\n  MenuItem,\r\n  Position,\r\n  Callout,\r\n  HTMLTable,\r\n} from \"@blueprintjs/core\";\r\n\r\nimport { DateInput, TimePrecision } from \"@blueprintjs/datetime\";\r\n\r\nimport useFormInput from \"../hooks/useFormInput\";\r\nimport useTagInput from \"../hooks/useTagInput\";\r\nimport useDateInput from \"../hooks/useDateInput\";\r\nimport RichTextEditor, { EditorValue } from \"react-rte\";\r\nimport utils from \"../utils\";\r\nimport axios from \"axios\";\r\nimport { BASE_URL } from \"../constants\";\r\nimport { useParams, useHistory } from \"react-router-dom\";\r\nimport { store } from \"../store\";\r\n\r\nexport default function Composer() {\r\n  const { state } = useContext(store);\r\n  const columnCount = useMedia([\"(min-width: 550px)\"], [2], 1);\r\n  const history = useHistory();\r\n  const { orgName } = useParams();\r\n  const [updated, setUpdated] = useState(0);\r\n  // Version and editor state\r\n  const [versions, setVersions] = useState([]);\r\n  const subject = useFormInput(\"\");\r\n  const from = useFormInput(\"\");\r\n  const sendDate = useDateInput(new Date());\r\n  const commitMessage = useFormInput(\"\");\r\n  const to = useTagInput();\r\n  const cc = useTagInput();\r\n  const bcc = useTagInput();\r\n  const tags = useTagInput();\r\n  const [body, setBody] = useState(RichTextEditor.createEmptyValue());\r\n  const [draft, setDraft] = useState({});\r\n  const [canEdit, setCanEdit] = useState(false);\r\n  const [currVersion, setCurrVersion] = useState(\"v0\");\r\n\r\n  // Comment state\r\n  const comment = useFormInput(\"\");\r\n  const [comments, setComments] = useState([]);\r\n\r\n  // Reviewer state\r\n  const [isOpen, setIsOpen] = useState(false);\r\n\r\n  /* FUNCTIONS */\r\n\r\n  // Check for draft Id in URL\r\n  useEffect(() => {\r\n    let jsonSearch = utils.searchToJSON(window.location.search);\r\n    if (jsonSearch.draftId) {\r\n      // Get data\r\n      axios\r\n        .get(`${BASE_URL}/api/v1/draft/${jsonSearch.draftId}`)\r\n        .then((res) => {\r\n          let { draft } = res.data;\r\n          setDraft(draft);\r\n          let versionNumber = draft.versions.length;\r\n\r\n          // Build the version select dropdown\r\n          let tmpVersions = [];\r\n          for (let i = 1; i <= versionNumber; i++) {\r\n            tmpVersions.push(`v${i}`);\r\n          }\r\n          setVersions(tmpVersions);\r\n          setCurrVersion(`v${versionNumber}`);\r\n          // We have set the current version to the most recent version so it must be editable\r\n          setCanEdit(true);\r\n          setVersionData(draft.versions[draft.versions.length - 1]);\r\n\r\n          // Set comment data\r\n          setComments(draft.comments);\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        });\r\n    }\r\n  }, [updated]);\r\n\r\n  function onBodyChange(value) {\r\n    setBody(value);\r\n  }\r\n\r\n  // Sset the data\r\n  function setVersionData(data) {\r\n    subject.setValue(data.subject);\r\n    sendDate.set(data.sendDate);\r\n    to.set(data.to);\r\n    cc.set(data.cc);\r\n    bcc.set(data.bcc);\r\n    tags.set(data.tags);\r\n    from.setValue(data.from);\r\n    commitMessage.setValue(data.commitMessage);\r\n    setBody(EditorValue.createFromString(data.body, \"html\"));\r\n  }\r\n\r\n  function changeVersion(event) {\r\n    setCurrVersion(event.currentTarget.value);\r\n    let versionNumber = event.currentTarget.value.substring(1) - 1;\r\n    let viewingVersion = draft.versions[versionNumber];\r\n    if (versionNumber + 1 === draft.versions.length) {\r\n      setCanEdit(true);\r\n    } else {\r\n      setCanEdit(false);\r\n    }\r\n\r\n    setVersionData(viewingVersion);\r\n  }\r\n\r\n  // Save new version\r\n  async function save() {\r\n    let data = {\r\n      subject: subject.value,\r\n      sendDate: sendDate.value,\r\n      to: to.values,\r\n      cc: cc.values,\r\n      bcc: bcc.values,\r\n      body: body.toString(\"html\"),\r\n      tags: tags.values,\r\n      commitMessage: commitMessage.value,\r\n    };\r\n    let { draftId } = utils.searchToJSON(window.location.search);\r\n    try {\r\n      await axios.post(`${BASE_URL}/api/v1/draft/${draftId}/version`, data);\r\n      AppToaster.show({\r\n        message: \"Draft saved\",\r\n        action: {\r\n          onClick: () => history.push(`/${orgName}/dashboard`),\r\n          text: \"Go to dashboard\",\r\n        },\r\n        intent: Intent.SUCCESS,\r\n      });\r\n      setUpdated(updated + 1);\r\n    } catch (err) {\r\n      console.log(err);\r\n\r\n      AppToaster.show({\r\n        message: err.message,\r\n        intent: Intent.DANGER,\r\n      });\r\n    }\r\n  }\r\n\r\n  // Create a comment\r\n  async function saveComment() {\r\n    let data = {\r\n      content: comment.value,\r\n      version: currVersion,\r\n    };\r\n\r\n    let { draftId } = utils.searchToJSON(window.location.search);\r\n    try {\r\n      let result = await axios.post(\r\n        `${BASE_URL}/api/v1/draft/${draftId}/comment`,\r\n        data\r\n      );\r\n      comment.clear();\r\n      setComments(result.data.comments);\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  }\r\n\r\n  const [members, setMembers] = useState([]);\r\n  useEffect(() => {\r\n    axios\r\n      .get(`${BASE_URL}/api/v1/organization/${orgName}/users`)\r\n      .then((res) => {\r\n        setMembers(res.data.users.concat(res.data.admins));\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }, [orgName]);\r\n\r\n  async function approve() {\r\n    let { draftId } = utils.searchToJSON(window.location.search);\r\n    try {\r\n      await axios.post(`${BASE_URL}/api/v1/draft/${draftId}/approve`);\r\n      AppToaster.show({\r\n        message: \"You've approved this draft\",\r\n        intent: Intent.SUCCESS,\r\n      });\r\n      setUpdated(updated + 1);\r\n    } catch (err) {\r\n      console.log(err.message);\r\n      AppToaster.show({ message: err.message, intent: Intent.DANGER });\r\n    }\r\n  }\r\n\r\n  async function reject() {\r\n    let { draftId } = utils.searchToJSON(window.location.search);\r\n    try {\r\n      await axios.post(`${BASE_URL}/api/v1/draft/${draftId}/reject`);\r\n      AppToaster.show({\r\n        message: \"You've rejected this draft\",\r\n        intent: Intent.SUCCESS,\r\n      });\r\n      setUpdated(updated + 1);\r\n    } catch (err) {\r\n      console.log(err.message);\r\n      AppToaster.show({ message: err.message, intent: Intent.DANGER });\r\n    }\r\n  }\r\n\r\n  /* STYLES */\r\n\r\n  const containerStyle = {\r\n    display: \"grid\",\r\n    gridTemplateColumns: columnCount === 2 ? \"1fr 1fr\" : \"1fr\",\r\n    gridTemplateRows: columnCount === 2 ? \"1fr\" : \"auto auto\",\r\n  };\r\n\r\n  const inputStyle = {\r\n    width: \"250px\",\r\n    marginBottom: \"10px\",\r\n  };\r\n\r\n  /* HTML */\r\n\r\n  return (\r\n    <div style={containerStyle}>\r\n      <div style={{ padding: \"20px\" }}>\r\n        <div style={{ border: \"solid 1px lightgrey\", padding: \"20px\" }}>\r\n          <h1>Reviewers</h1>\r\n          <Divider />\r\n          {draft.reviewers &&\r\n            draft.reviewers.length > 0 ?\r\n            draft.reviewers.map((reviewer) => (\r\n              <div\r\n                style={{\r\n                  display: \"grid\",\r\n                  gridTemplateColumns: \"24px 150px 1fr 150px 100px\",\r\n                  columnGap: \"10px\",\r\n                  gridTemplateRows: \"24px\",\r\n                  margin: \"10px 0px\",\r\n                  padding: \"0px 10px\",\r\n                }}\r\n              >\r\n                <div>\r\n                  <img\r\n                    style={{\r\n                      borderRadius: \"50%\",\r\n                      width: \"20px\",\r\n                      height: \"20px\",\r\n                      margin: \"2px\",\r\n                    }}\r\n                    src=\"https://www.w3schools.com/howto/img_avatar.png\"\r\n                    alt=\"profile\"\r\n                  />\r\n                </div>\r\n\r\n                <div style={{ display: \"table\", height: \"24px\" }}>\r\n                  <div\r\n                    style={{ display: \"table-cell\", verticalAlign: \"middle\" }}\r\n                  >\r\n                    {reviewer.firstName + \" \" + reviewer.lastName}\r\n                  </div>\r\n                </div>\r\n\r\n                <div></div>\r\n\r\n                <div style={{ display: \"table\", height: \"24px\" }}>\r\n                  <div style={{ display: \"table-cell\", verticalAlign: \"middle\" }}>\r\n                    {reviewer.approved ? (\r\n                      <div style={{ textAlign: \"center\" }}>Approved</div>\r\n                    ) : (\r\n                      <div style={{ textAlign: \"center\" }}>Not Approved</div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n\r\n                <div style={{ display: \"table\", height: \"24px\" }}>\r\n                  <div\r\n                    style={{ display: \"table-cell\", verticalAlign: \"middle\" }}\r\n                  >\r\n                    {!state.user ||\r\n                    reviewer.id !==\r\n                      state.user._id ? null : reviewer.approved ? (\r\n                      <Button\r\n                        text=\"Reject\"\r\n                        onClick={reject}\r\n                        intent={Intent.DANGER}\r\n                        small\r\n                      />\r\n                    ) : (\r\n                      <Button\r\n                        text=\"Approve\"\r\n                        onClick={approve}\r\n                        intent={Intent.SUCCESS}\r\n                        small\r\n                      />\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )) : \"No assigned reviewers.\"}\r\n          <Divider />\r\n          <div style={{ textAlign: \"right\", marginTop: \"10px\" }}>\r\n            <Button intent={Intent.PRIMARY} onClick={() => setIsOpen(true)} text=\"Manage Reviewers\" />\r\n            <ReviewerManager\r\n              updated={updated}\r\n              setUpdated={setUpdated}\r\n              reviewers={draft.reviewers || []}\r\n              members={members}\r\n              isOpen={isOpen}\r\n              setIsOpen={setIsOpen}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div\r\n          style={{\r\n            border: \"solid 1px lightgrey\",\r\n            padding: \"20px\",\r\n            marginTop: \"20px\",\r\n          }}\r\n        >\r\n          <h1>Comments</h1>\r\n          <Divider />\r\n          {comments.length === 0\r\n            ? \"No comments\"\r\n            : comments.map((comment) => (\r\n                <div\r\n                  style={{\r\n                    display: \"grid\",\r\n                    gridTemplateAreas:\r\n                      \"'pfp name-date version' 'pfp body version' '. body .' \",\r\n                    gridTemplateColumns: \"48px 1fr 48px\",\r\n                    gridTemplateRows: \"24px 24px auto\",\r\n                    marginTop: \"10px\",\r\n                    columnGap: \"10px\",\r\n                  }}\r\n                >\r\n                  <div style={{ gridArea: \"pfp\" }}>\r\n                    <img\r\n                      style={{\r\n                        borderRadius: \"50%\",\r\n                        width: \"40px\",\r\n                        height: \"40px\",\r\n                        margin: \"4px\",\r\n                      }}\r\n                      src=\"https://www.w3schools.com/howto/img_avatar.png\"\r\n                      alt=\"profile\"\r\n                    />\r\n                  </div>\r\n                  <div style={{ gridArea: \"name-date\" }}>\r\n                    {comment.author.firstName} {comment.author.lastName} -{\" \"}\r\n                    {new Date(parseInt(comment.date)).toLocaleDateString()}\r\n                  </div>\r\n                  <div style={{ gridArea: \"version\" }}> {comment.version}</div>\r\n                  <div style={{ gridArea: \"body\" }}>{comment.content}</div>\r\n                </div>\r\n              ))}\r\n          <Divider />\r\n          <TextArea\r\n            style={{ marginTop: \"10px\" }}\r\n            growVertically={true}\r\n            intent={Intent.PRIMARY}\r\n            fill={true}\r\n            placeholder=\"Comment...\"\r\n            value={comment.value}\r\n            onChange={comment.onChange}\r\n          />\r\n          <div style={{ marginTop: \"10px\", textAlign: \"right\" }}>\r\n            <Button\r\n              text=\"Comment\"\r\n              onClick={saveComment}\r\n              intent={Intent.PRIMARY}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div style={{ padding: \"20px\" }}>\r\n        <div style={{ border: \"solid 1px lightgrey\", padding: \"20px\" }}>\r\n          <div>\r\n            <HTMLSelect\r\n              onChange={changeVersion}\r\n              style={{ marginBottom: \"10px\" }}\r\n              options={versions}\r\n              value={currVersion}\r\n            />\r\n          </div>\r\n          <InputGroup\r\n            style={inputStyle}\r\n            value={subject.value}\r\n            onChange={subject.onChange}\r\n            placeholder=\"Subject\"\r\n            disabled={!canEdit}\r\n          />\r\n          <div style={inputStyle}>\r\n            <DateInput\r\n              fill\r\n              formatDate={(date) => date.toLocaleDateString()}\r\n              parseDate={(str) => new Date(str)}\r\n              value={sendDate.value}\r\n              placeholder={\"Send Date\"}\r\n              onChange={sendDate.onChange}\r\n              popoverProps={{ position: Position.BOTTOM }}\r\n              disabled={!canEdit}\r\n              maxDate={new Date(1893562264171)}\r\n            />\r\n          </div>\r\n          <InputGroup\r\n            value={from.value}\r\n            onChange={from.onChange}\r\n            style={inputStyle}\r\n            placeholder=\"From\"\r\n            disabled={!canEdit}\r\n          />\r\n          <div style={{ marginBottom: \"10px\" }}>\r\n            <TagInput\r\n              placeholder=\"To\"\r\n              values={to.values}\r\n              onChange={to.onChange}\r\n              rightElement={\r\n                to.values.length > 0 ? (\r\n                  <Button\r\n                    onClick={() => to.clear()}\r\n                    icon=\"cross\"\r\n                    minimal={true}\r\n                  />\r\n                ) : null\r\n              }\r\n              addOnBlur={true}\r\n              tagProps={{ minimal: true }}\r\n              disabled={!canEdit}\r\n            />\r\n          </div>\r\n\r\n          <div style={{ marginBottom: \"10px\" }}>\r\n            <TagInput\r\n              placeholder=\"Cc\"\r\n              values={cc.values}\r\n              onChange={cc.onChange}\r\n              rightElement={\r\n                cc.values.length > 0 ? (\r\n                  <Button\r\n                    onClick={() => cc.clear()}\r\n                    icon=\"cross\"\r\n                    minimal={true}\r\n                  />\r\n                ) : null\r\n              }\r\n              addOnBlur={true}\r\n              tagProps={{ minimal: true }}\r\n              disabled={!canEdit}\r\n            />\r\n          </div>\r\n          <div style={{ marginBottom: \"10px\" }}>\r\n            <TagInput\r\n              placeholder=\"Bcc\"\r\n              values={bcc.values}\r\n              onChange={bcc.onChange}\r\n              rightElement={\r\n                bcc.values.length > 0 ? (\r\n                  <Button\r\n                    onClick={() => bcc.clear()}\r\n                    icon=\"cross\"\r\n                    minimal={true}\r\n                  />\r\n                ) : null\r\n              }\r\n              addOnBlur={true}\r\n              tagProps={{ minimal: true }}\r\n              disabled={!canEdit}\r\n            />\r\n          </div>\r\n\r\n          <RichTextEditor\r\n            editorClassName={\"email-body-editor\"}\r\n            placeholder=\"Body...\"\r\n            style={{ minHeight: \"400px\" }}\r\n            spellCheck={true}\r\n            onChange={onBodyChange}\r\n            value={body}\r\n            disabled={!canEdit}\r\n          />\r\n          <div style={{ marginTop: \"10px\", ...inputStyle, width: \"auto\" }}>\r\n            <TagInput\r\n              placeholder=\"Add tags to identify this email\"\r\n              leftIcon=\"tag\"\r\n              rightElement={\r\n                tags.values.length > 0 ? (\r\n                  <Button\r\n                    onClick={() => tags.clear()}\r\n                    icon=\"cross\"\r\n                    minimal={true}\r\n                  />\r\n                ) : null\r\n              }\r\n              values={tags.values}\r\n              onChange={tags.onChange}\r\n              addOnBlur={true}\r\n              tagProps={{ minimal: true }}\r\n              disabled={!canEdit}\r\n            />\r\n          </div>\r\n          <InputGroup\r\n            rightElement={\r\n              <Button\r\n                onClick={save}\r\n                intent={Intent.PRIMARY}\r\n                text={`Save as v${versions.length + 1}`}\r\n                disabled={!canEdit}\r\n              />\r\n            }\r\n            placeholder=\"Commit message\"\r\n            leftIcon=\"info-sign\"\r\n            value={commitMessage.value}\r\n            onChange={commitMessage.onChange}\r\n            disabled={!canEdit}\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useState, useEffect } from \"react\";\r\n\r\nexport default function useMedia(queries, values, defaultValue) {\r\n  // Array containing a media query list for each query\r\n  const mediaQueryLists = queries.map((q) => window.matchMedia(q));\r\n\r\n  // Function that gets value based on matching media query\r\n  const getValue = () => {\r\n    // Get index of first media query that matches\r\n    const index = mediaQueryLists.findIndex((mql) => mql.matches);\r\n    // Return related value or defaultValue if none\r\n    return typeof values[index] !== \"undefined\" ? values[index] : defaultValue;\r\n  };\r\n\r\n  // State and setter for matched value\r\n  const [value, setValue] = useState(getValue);\r\n\r\n  useEffect(\r\n    () => {\r\n      // Event listener callback\r\n      // Note: By defining getValue outside of useEffect we ensure that it has ...\r\n      // ... current values of hook args (as this hook callback is created once on mount).\r\n      const handler = () => setValue(getValue);\r\n      // Set a listener for each media query with above handler as callback.\r\n      mediaQueryLists.forEach((mql) => mql.addListener(handler));\r\n      // Remove listeners on cleanup\r\n      return () =>\r\n        mediaQueryLists.forEach((mql) => mql.removeListener(handler));\r\n    },\r\n    [] // Empty array ensures effect is only run on mount and unmount\r\n  );\r\n\r\n  return value;\r\n}\r\n","import { useState } from \"react\";\r\n\r\nexport default function useDateInput(initialDate) {\r\n  const [value, setValue] = useState(initialDate || null);\r\n\r\n  function onChange(date) {\r\n    setValue(date);\r\n  }\r\n\r\n  function set(date) {\r\n    setValue(new Date(date));\r\n  }\r\n  function clear() {\r\n    setValue(null);\r\n  }\r\n\r\n  return {\r\n    value: value,\r\n    onChange: onChange,\r\n    set: set,\r\n    clear: clear,\r\n  };\r\n}\r\n","let accessToken = \"\";\r\n\r\nexport function setAccessToken(token) {\r\n  accessToken = token;\r\n}\r\nexport function getAccessToken() {\r\n  return accessToken;\r\n}\r\n","import React, { useContext, useState } from \"react\";\r\nimport { InputGroup, Button, Intent, Tooltip } from \"@blueprintjs/core\";\r\nimport useFormInput from \"../hooks/useFormInput\";\r\nimport { BASE_URL } from \"../constants\";\r\nimport axios from \"axios\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { store, actions } from \"../store\";\r\nimport { setAccessToken } from \"../accessToken\";\r\nimport utils from \"../utils\";\r\nimport { AppToaster } from \"../toaster\";\r\n\r\nexport default function Login() {\r\n  const { dispatch } = useContext(store);\r\n\r\n  const username = useFormInput(\"\");\r\n  const password = useFormInput(\"\");\r\n  const history = useHistory();\r\n  const [showPassword, setShowPassword] = useState(false);\r\n\r\n  async function login() {\r\n    let redirect = null;\r\n    try {\r\n      const search = utils.searchToJSON(history.location.search);\r\n      redirect = search.redirect || \"/create\";\r\n    } catch {\r\n      redirect = \"/create\";\r\n    }\r\n\r\n    let data = {\r\n      username: username.value,\r\n      password: password.value,\r\n    };\r\n    try {\r\n      let result = await axios.post(BASE_URL + \"/api/v1/auth/login\", data, {\r\n        withCredentials: true,\r\n      });\r\n      const { accessToken, user } = result.data;\r\n      if (accessToken) {\r\n        setAccessToken(accessToken);\r\n        dispatch({ type: actions.SET_USER, payload: user });\r\n        history.push(redirect);\r\n      } else {\r\n        console.log(\"Invalid login\");\r\n      }\r\n    } catch (err) {\r\n      console.log(err.message);\r\n      if (err.response) {\r\n        console.log(err.response.status);\r\n        if (err.response.status === 404) {\r\n          AppToaster.show({\r\n            message: \"User does not exist.\",\r\n            intent: Intent.DANGER,\r\n          });\r\n        } else if (err.response.status === 401) {\r\n          AppToaster.show({\r\n            message: \"Incorrect password.\",\r\n            intent: Intent.DANGER,\r\n          });\r\n        } else {\r\n          AppToaster.show({\r\n            message: \"There was an error. Please try again.\",\r\n            intent: Intent.DANGER,\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  function goSignup() {\r\n    if (history.location.search) {\r\n      const search = utils.searchToJSON(history.location.search);\r\n      let redirect = search.redirect;\r\n      history.push(`/signup?redirect=${redirect}`);\r\n    } else {\r\n      history.push(\"/signup\");\r\n    }\r\n  }\r\n  function handleLockClick() {\r\n    setShowPassword(!showPassword);\r\n  }\r\n\r\n  const lockButton = (\r\n    <Tooltip content={`${showPassword ? \"Hide\" : \"Show\"} Password`}>\r\n      <Button\r\n        icon={showPassword ? \"unlock\" : \"lock\"}\r\n        intent={Intent.WARNING}\r\n        minimal={true}\r\n        onClick={handleLockClick}\r\n      />\r\n    </Tooltip>\r\n  );\r\n\r\n  return (\r\n    <div>\r\n      <div\r\n        style={{\r\n          width: \"550px\",\r\n          height: \"auto\",\r\n          position: \"absolute\",\r\n          top: \"50%\",\r\n          left: \"50%\",\r\n          transform: \"translate(-50%, -50%)\",\r\n          padding: \"30px\",\r\n        }}\r\n      >\r\n        <h1>Log in</h1>\r\n        <InputGroup\r\n          style={{ marginBottom: \"20px\" }}\r\n          placeholder=\"Username\"\r\n          value={username.value}\r\n          onChange={username.onChange}\r\n        />\r\n        <InputGroup\r\n          style={{ marginBottom: \"20px\" }}\r\n          placeholder=\"Password\"\r\n          value={password.value}\r\n          onChange={password.onChange}\r\n          rightElement={lockButton}\r\n          type={showPassword ? \"text\" : \"password\"}\r\n        />\r\n        <div style={{ textAlign: \"right\" }}>\r\n          <Button\r\n            style={{ marginRight: \"10px\" }}\r\n            text=\"Sign up\"\r\n            onClick={goSignup}\r\n          />\r\n          <Button text=\"Log in\" onClick={login} intent={Intent.PRIMARY} />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useContext, useState } from \"react\";\r\nimport useFormInput from \"../hooks/useFormInput\";\r\nimport { InputGroup, Button, Intent, Tooltip } from \"@blueprintjs/core\";\r\nimport axios from \"axios\";\r\nimport { BASE_URL } from \"../constants\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { store, actions } from \"../store\";\r\nimport { setAccessToken } from \"../accessToken\";\r\nimport utils from \"../utils\";\r\nimport { AppToaster } from \"../toaster\";\r\n\r\nexport default function Signup() {\r\n  const { dispatch } = useContext(store);\r\n\r\n  const username = useFormInput(\"\");\r\n  const password = useFormInput(\"\");\r\n  const firstName = useFormInput(\"\");\r\n  const lastName = useFormInput(\"\");\r\n  const email = useFormInput(\"\");\r\n  const history = useHistory();\r\n  const [showPassword, setShowPassword] = useState(false);\r\n\r\n  async function signup() {\r\n    let redirect = null;\r\n    try {\r\n      const search = utils.searchToJSON(history.location.search);\r\n      redirect = search.redirect || \"/create\";\r\n    } catch {\r\n      redirect = \"/create\";\r\n    }\r\n\r\n    let data = {\r\n      username: username.value,\r\n      password: password.value,\r\n      firstName: firstName.value,\r\n      lastName: lastName.value,\r\n      email: email.value,\r\n    };\r\n    try {\r\n      let res = await axios.post(BASE_URL + \"/api/v1/auth/signup\", data);\r\n      const { user, accessToken } = res.data;\r\n      setAccessToken(accessToken);\r\n      dispatch({ type: actions.SET_USER, payload: user });\r\n\r\n      history.push(redirect);\r\n    } catch (err) {\r\n      console.log(err.message);\r\n      if (err.response) {\r\n        if (err.response.status === 422) {\r\n          AppToaster.show({\r\n            message: err.response.data.message,\r\n            intent: Intent.DANGER,\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  function goLogin() {\r\n    if (history.location.search) {\r\n      const search = utils.searchToJSON(history.location.search);\r\n      let redirect = search.redirect;\r\n      history.push(`/login?redirect=${redirect}`);\r\n    } else {\r\n      history.push(\"/login\");\r\n    }\r\n  }\r\n\r\n  function handleLockClick() {\r\n    setShowPassword(!showPassword);\r\n  }\r\n\r\n  const lockButton = (\r\n    <Tooltip content={`${showPassword ? \"Hide\" : \"Show\"} Password`}>\r\n      <Button\r\n        icon={showPassword ? \"unlock\" : \"lock\"}\r\n        intent={Intent.WARNING}\r\n        minimal={true}\r\n        onClick={handleLockClick}\r\n      />\r\n    </Tooltip>\r\n  );\r\n  const inputStyle = { marginBottom: \"20px\" };\r\n  return (\r\n    <div>\r\n      <div\r\n        style={{\r\n          width: \"550px\",\r\n          height: \"auto\",\r\n          position: \"absolute\",\r\n          top: \"50%\",\r\n          left: \"50%\",\r\n          transform: \"translate(-50%, -50%)\",\r\n          padding: \"30px\",\r\n        }}\r\n      >\r\n        <h1>Sign up</h1>\r\n        <InputGroup\r\n          style={inputStyle}\r\n          value={firstName.value}\r\n          onChange={firstName.onChange}\r\n          placeholder=\"First Name\"\r\n        />\r\n        <InputGroup\r\n          style={inputStyle}\r\n          value={lastName.value}\r\n          onChange={lastName.onChange}\r\n          placeholder=\"Last Name\"\r\n        />\r\n        <InputGroup\r\n          style={inputStyle}\r\n          value={email.value}\r\n          onChange={email.onChange}\r\n          placeholder=\"Email\"\r\n        />\r\n        <InputGroup\r\n          style={inputStyle}\r\n          value={username.value}\r\n          onChange={username.onChange}\r\n          placeholder=\"Username\"\r\n        />\r\n        <InputGroup\r\n          style={inputStyle}\r\n          value={password.value}\r\n          onChange={password.onChange}\r\n          placeholder=\"Password\"\r\n          rightElement={lockButton}\r\n          type={showPassword ? \"text\" : \"password\"}\r\n        />\r\n        <div style={{ textAlign: \"right\" }}>\r\n          <Button\r\n            text=\"Log in\"\r\n            onClick={goLogin}\r\n            style={{ marginRight: \"10px\" }}\r\n          />\r\n          <Button text=\"Sign up\" onClick={signup} intent={Intent.PRIMARY} />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useContext } from \"react\";\r\nimport { InputGroup, Button, Intent, Tooltip } from \"@blueprintjs/core\";\r\nimport useFormInput from \"../hooks/useFormInput\";\r\nimport { BASE_URL } from \"../constants\";\r\nimport axios from \"axios\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { AppToaster } from \"../toaster\";\r\nimport { setAccessToken } from \"../accessToken\";\r\nimport { store, actions } from \"../store\";\r\n\r\nexport default function OrgSignup() {\r\n  const {  dispatch } = useContext(store);\r\n  const history = useHistory();\r\n  const username = useFormInput(\"\");\r\n  const firstName = useFormInput(\"\");\r\n  const lastName = useFormInput(\"\");\r\n  const password = useFormInput(\"\");\r\n  const email = useFormInput(\"\");\r\n  const [showPassword, setShowPassword] = useState(false);\r\n\r\n  const orgName = useFormInput(\"\");\r\n\r\n  const [stepNum, setStepNum] = useState(0);\r\n\r\n  async function create() {\r\n    let user = null;\r\n    const signupData = {\r\n      username: username.value,\r\n      password: password.value,\r\n      email: email.value,\r\n      firstName: firstName.value,\r\n      lastName: lastName.value,\r\n    };\r\n\r\n    try {\r\n      let result = await axios.post(\r\n        `${BASE_URL}/api/v1/auth/signup`,\r\n        signupData\r\n      );\r\n\r\n      let { accessToken } = result.data;\r\n      user = result.data.user;\r\n      if (!accessToken || !user) {\r\n        // Something went wrong\r\n        AppToaster.show({\r\n          message:\r\n            \"There was an error creating your account. Please try again later.\",\r\n          intent: Intent.DANGER,\r\n        });\r\n        return;\r\n      }\r\n\r\n      setAccessToken(accessToken);\r\n      dispatch({ type: actions.SET_USER, payload: user });\r\n    } catch (err) {\r\n      if (err.response.status === 422) {\r\n        AppToaster.show({\r\n          message: err.response.data.message,\r\n          intent: Intent.DANGER,\r\n        });\r\n      }\r\n    }\r\n\r\n    const orgData = {\r\n      name: orgName.value,\r\n      admins: [user._id],\r\n    };\r\n\r\n    try {\r\n      let result = await axios.post(`${BASE_URL}/api/v1/organization`, orgData);\r\n      let { name } = result.data.organization;\r\n      AppToaster.show({\r\n        message:\r\n          \"Your account and organization have been created. Redirecting to admin page.\",\r\n        intent: Intent.SUCCESS,\r\n      });\r\n      setTimeout(() => {\r\n        history.push(`${name}/admin`);\r\n      }, 3000);\r\n    } catch (err) {\r\n      console.log(err.messsage);\r\n      AppToaster.show({\r\n        message:\r\n          \"There was an error creating the organization. Please try again later.\",\r\n        intent: Intent.DANGER,\r\n      });\r\n    }\r\n  }\r\n\r\n  function validateForm() {\r\n    if (firstName.value.trim() === \"\") return \"First name cannot be blank.\";\r\n    if (lastName.value.trim() === \"\") return \"Last name cannot be blank.\";\r\n    if (email.value.trim() === \"\") return \"Email cannot be blank.\";\r\n    if (username.value.trim() === \"\") return \"Username cannot be blank.\";\r\n    if (password.value.trim() === \"\") return \"Password cannot be blank.\";\r\n  }\r\n\r\n  const inputStyle = { marginBottom: \"20px\" };\r\n  const changeStepNum = (curr, next) => () => {\r\n    console.log(curr, next);\r\n    if (curr === 0) {\r\n      // Check for valid form entries\r\n      let errorMessage = validateForm();\r\n      if (errorMessage) {\r\n        AppToaster.show({\r\n          message: errorMessage,\r\n          intent: Intent.DANGER,\r\n        });\r\n      } else {\r\n        setStepNum(next);\r\n      }\r\n    } else {\r\n      setStepNum(next);\r\n    }\r\n  };\r\n\r\n  function handleLockClick() {\r\n    setShowPassword(!showPassword);\r\n  }\r\n  const lockButton = (\r\n    <Tooltip content={`${showPassword ? \"Hide\" : \"Show\"} Password`}>\r\n      <Button\r\n        icon={showPassword ? \"unlock\" : \"lock\"}\r\n        intent={Intent.WARNING}\r\n        minimal={true}\r\n        onClick={handleLockClick}\r\n      />\r\n    </Tooltip>\r\n  );\r\n  if (stepNum === 0) {\r\n    return (\r\n      <div>\r\n        <div\r\n          style={{\r\n            width: \"550px\",\r\n            height: \"auto\",\r\n            position: \"absolute\",\r\n            top: \"50%\",\r\n            left: \"50%\",\r\n            transform: \"translate(-50%, -50%)\",\r\n            padding: \"30px\",\r\n          }}\r\n        >\r\n          <h1>First, create an account</h1>\r\n          <InputGroup\r\n            placeholder=\"First Name\"\r\n            value={firstName.value}\r\n            onChange={firstName.onChange}\r\n            style={inputStyle}\r\n          />\r\n          <InputGroup\r\n            placeholder=\"Last Name\"\r\n            value={lastName.value}\r\n            onChange={lastName.onChange}\r\n            style={inputStyle}\r\n          />\r\n          <InputGroup\r\n            placeholder=\"Email\"\r\n            value={email.value}\r\n            onChange={email.onChange}\r\n            style={inputStyle}\r\n          />\r\n          <InputGroup\r\n            placeholder=\"Username\"\r\n            value={username.value}\r\n            onChange={username.onChange}\r\n            style={inputStyle}\r\n          />\r\n          <InputGroup\r\n            placeholder=\"Password\"\r\n            value={password.value}\r\n            onChange={password.onChange}\r\n            style={inputStyle}\r\n            rightElement={lockButton}\r\n            type={showPassword ? \"text\" : \"password\"}\r\n          />\r\n          <div style={{ textAlign: \"right\" }}>\r\n            <Button\r\n              intent={Intent.PRIMARY}\r\n              onClick={changeStepNum(0, 1)}\r\n              text=\"Next\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  } else if (stepNum === 1) {\r\n    return (\r\n      <div>\r\n        <div\r\n          style={{\r\n            width: \"550px\",\r\n            height: \"auto\",\r\n            position: \"absolute\",\r\n            top: \"50%\",\r\n            left: \"50%\",\r\n            transform: \"translate(-50%, -50%)\",\r\n            padding: \"30px\",\r\n          }}\r\n        >\r\n          <h1>Create organization</h1>\r\n          <p>You will automatically added as an admin to this organization.</p>\r\n          <InputGroup\r\n            placeholder=\"Organization Name\"\r\n            value={orgName.value}\r\n            onChange={orgName.onChange}\r\n            style={inputStyle}\r\n          />\r\n          <div style={{ textAlign: \"right\" }}>\r\n            <Button\r\n              style={{ marginRight: \"5px\" }}\r\n              onClick={changeStepNum(1, 0)}\r\n              text=\"Go Back\"\r\n            />\r\n            <Button\r\n              intent={Intent.PRIMARY}\r\n              onClick={create}\r\n              text=\"Create Organization\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\nimport {\r\n  Button,\r\n  HTMLTable,\r\n  Intent,\r\n  Spinner,\r\n  Callout,\r\n  Code,\r\n} from \"@blueprintjs/core\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { BASE_URL } from \"../constants\";\r\nimport { store } from \"../store\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nexport default function Admin() {\r\n  const history = useHistory();\r\n  const { state } = useContext(store);\r\n  const { orgName } = useParams();\r\n  const [authorized, setAuthorized] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n  const [users, setUsers] = useState([]);\r\n  const [admins, setAdmins] = useState([]);\r\n\r\n  useEffect(() => {\r\n    (async function () {\r\n      // Check if user is an admin\r\n      try {\r\n        let { isAdmin } = (\r\n          await axios.get(`${BASE_URL}/api/v1/organization/${orgName}/isAdmin`)\r\n        ).data;\r\n\r\n        if (!isAdmin) {\r\n          setLoading(false);\r\n          return;\r\n        } else {\r\n          // User is an admin, authorized to see this page\r\n          setAuthorized(true);\r\n        }\r\n      } catch (err) {\r\n        if (err.response) {\r\n          if (err.response.status === 401) {\r\n            setLoading(false);\r\n          }\r\n        }\r\n      }\r\n\r\n      // Fetch members of this organization\r\n      axios\r\n        .get(`${BASE_URL}/api/v1/organization/${orgName}/users`)\r\n        .then((res) => {\r\n          setUsers(res.data.users);\r\n          setAdmins(res.data.admins);\r\n        });\r\n\r\n      setLoading(false);\r\n    })();\r\n  }, [orgName]);\r\n\r\n  const goto = (destination) => () => {\r\n    history.push(destination);\r\n  };\r\n  if (loading) {\r\n    return (\r\n      <div\r\n        style={{\r\n          width: \"min-content\",\r\n          position: \"absolute\",\r\n          top: \"50%\",\r\n          left: \"50%\",\r\n          transform: \"translate(-50%, -50%)\",\r\n        }}\r\n      >\r\n        <Spinner intent={Intent.PRIMARY} />\r\n      </div>\r\n    );\r\n  }\r\n  if (!authorized) {\r\n    return (\r\n      <div\r\n        style={{\r\n          width: \"min-content\",\r\n          position: \"absolute\",\r\n          top: \"50%\",\r\n          left: \"50%\",\r\n          transform: \"translate(-50%, -50%)\",\r\n        }}\r\n      >\r\n        <Callout icon=\"disable\" title=\"Not authorized\">\r\n          <div style={{ width: \"350px\" }}>\r\n            {state.user ? (\r\n              <>\r\n                <p>\r\n                  You're not an admin of this organization. If you beleive you\r\n                  should be, please request permissions from a current admin.\r\n                </p>\r\n                <p>\r\n                  Currently logged in as:{\" \"}\r\n                  <Code style={{ marginLeft: \"5px\" }}>\r\n                    {state.user.username}\r\n                  </Code>\r\n                </p>\r\n                <Button\r\n                  intent={Intent.PRIMARY}\r\n                  text=\"Request Access\"\r\n                  disabled\r\n                />\r\n              </>\r\n            ) : (\r\n              <>\r\n                <p style={{ width: \"350px\" }}>\r\n                  You're currently not logged in. You must be logged in to\r\n                  continue.{\" \"}\r\n                </p>\r\n                <Button\r\n                  intent={Intent.PRIMARY}\r\n                  onClick={goto(`/login?redirect=/${orgName}/dashboard`)}\r\n                  text=\"Log in\"\r\n                />\r\n              </>\r\n            )}\r\n          </div>\r\n        </Callout>\r\n      </div>\r\n    );\r\n  }\r\n  return (\r\n    <div style={{padding: \"20px\"}}>\r\n      <h1>Members</h1>\r\n      <HTMLTable>\r\n        <thead>\r\n          <tr>\r\n            <th>First Name</th>\r\n            <th>Last Name</th>\r\n            <th>Username</th>\r\n            <th>Email</th>\r\n            <th>Role</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {admins.map((user) => (\r\n            <tr>\r\n              <td>{user.firstName}</td>\r\n              <td>{user.lastName}</td>\r\n              <td>{user.username}</td>\r\n              <td>{user.email}</td>\r\n              <td>Admin</td>\r\n            </tr>\r\n          ))}\r\n          {users.map((user) => (\r\n            <tr>\r\n              <td>{user.firstName}</td>\r\n              <td>{user.lastName}</td>\r\n              <td>{user.username}</td>\r\n              <td>{user.email}</td>\r\n              <td>Member</td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </HTMLTable>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { InputGroup, Button, Intent } from \"@blueprintjs/core\";\r\nimport useFormInput from \"../hooks/useFormInput\";\r\nimport axios from \"axios\";\r\nimport { BASE_URL } from \"../constants\";\r\nimport { AppToaster } from \"../toaster\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nexport default function OrgJoin() {\r\n  const history = useHistory();\r\n  const orgName = useFormInput(\"\");\r\n\r\n  async function join() {\r\n    if (orgName.value.trim() === \"\") {\r\n      AppToaster.show({\r\n        message: \"Organization name cannot be blank.\",\r\n        intent: Intent.DANGER,\r\n      });\r\n      return;\r\n    }\r\n    try {\r\n      let name = orgName.value.replace(/ /g, \"-\");\r\n      await axios.patch(`${BASE_URL}/api/v1/organization/${name}/users`);\r\n      AppToaster.show({\r\n        message: `You've sucessfully joined ${name}. Redirecting to dashboard.`,\r\n        intent: Intent.SUCCESS,\r\n      });\r\n      setTimeout(() => {\r\n        history.push(`/${name}/dashboard`);\r\n      }, 3000);\r\n    } catch (err) {\r\n      if (err.response) {\r\n        if (err.response.status === 404) {\r\n          AppToaster.show({\r\n            message: \"Organization does not exist.\",\r\n            intent: Intent.DANGER,\r\n          });\r\n        } else if (err.response.status === 401) {\r\n          AppToaster.show({\r\n            message: \"You need to be logged in to join an organization.\",\r\n            intent: Intent.DANGER,\r\n            action: {\r\n              onClick: () => history.push(\"/login?redirect=/join\"),\r\n              text: \"Log in\",\r\n            },\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div\r\n        style={{\r\n          width: \"550px\",\r\n          height: \"auto\",\r\n          position: \"absolute\",\r\n          top: \"50%\",\r\n          left: \"50%\",\r\n          transform: \"translate(-50%, -50%)\",\r\n          padding: \"30px\",\r\n        }}\r\n      >\r\n        <h1>Join an organization</h1>\r\n        <p>Enter the organization name you want to join. </p>\r\n        <InputGroup\r\n          style={{ marginBottom: \"20px\" }}\r\n          placeholder=\"my-cool-organization\"\r\n          value={orgName.value.replace(/ /g, \"-\")}\r\n          onChange={orgName.onChange}\r\n        />\r\n        <div style={{ textAlign: \"right\" }}>\r\n          <Button intent={Intent.PRIMARY} onClick={join} text=\"Join\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useContext, useState } from \"react\";\r\nimport {\r\n  Navbar,\r\n  NavbarGroup,\r\n  NavbarDivider,\r\n  Button,\r\n  Alignment,\r\n  NavbarHeading,\r\n  Classes,\r\n  Intent,\r\n  Menu,\r\n  MenuItem,\r\n  Popover,\r\n  Position,\r\n  Divider,\r\n} from \"@blueprintjs/core\";\r\nimport { store, actions } from \"../store\";\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { BASE_URL } from \"../constants\";\r\nimport { setAccessToken } from \"../accessToken\";\r\n\r\nexport default function Nav() {\r\n  const { state, dispatch } = useContext(store);\r\n  const history = useHistory();\r\n  const { orgName } = useParams();\r\n  const [organizations, setOrganizations] = useState([]);\r\n\r\n  const goto = (destination) => () => {\r\n    history.push(destination);\r\n  };\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .get(`${BASE_URL}/api/v1/user/organizations`)\r\n      .then((response) => {\r\n        setOrganizations(response.data.organizations);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err.message);\r\n      });\r\n  }, []);\r\n\r\n  async function logout() {\r\n    if (state.user) {\r\n      try {\r\n        await axios.post(`${BASE_URL}/api/v1/auth/logout`, null);\r\n        dispatch({ type: actions.CLEAR_USER });\r\n        setAccessToken(null);\r\n        history.push(\"/\");\r\n      } catch (err) {\r\n        console.log(err.message);\r\n      }\r\n    }\r\n  }\r\n\r\n  async function logoutAll() {\r\n    if (state.user) {\r\n      try {\r\n        await axios.post(`${BASE_URL}/api/v1/auth/logout-all`);\r\n        dispatch({ type: actions.CLEAR_USER });\r\n        setAccessToken(null);\r\n        history.push(\"/\");\r\n      } catch (err) {\r\n        console.log(err.message);\r\n      }\r\n    }\r\n  }\r\n\r\n  async function createDraft() {\r\n    try {\r\n      let res = await axios.post(BASE_URL + \"/api/v1/draft\", {\r\n        orgName,\r\n      });\r\n      let { draft } = res.data;\r\n      let draftId = draft._id;\r\n      history.push(`/${orgName}/compose?draftId=${draftId}`);\r\n    } catch (err) {\r\n      console.log(err.messsage);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Navbar>\r\n      <NavbarGroup align={Alignment.LEFT}>\r\n        <NavbarHeading>\r\n          <Popover\r\n            modifiers={{ arrow: { enabled: false } }}\r\n            content={\r\n              <Menu>\r\n                {organizations.map((organization) =>\r\n                  organization.name === orgName ? null : (\r\n                    <MenuItem\r\n                      onClick={goto(`/${organization.name}/dashboard`)}\r\n                      key={organization._id}\r\n                      text={organization.name}\r\n                    />\r\n                  )\r\n                )}\r\n                <Divider />\r\n                <MenuItem\r\n                  onClick={goto(\"/create\")}\r\n                  icon=\"plus\"\r\n                  text=\"Create Organization\"\r\n                />\r\n              </Menu>\r\n            }\r\n            target={<Button text={orgName} rightIcon=\"double-caret-vertical\" />}\r\n            position={Position.BOTTOM_RIGHT}\r\n            minimal\r\n          />\r\n        </NavbarHeading>\r\n        <NavbarDivider />\r\n        {state.user && (\r\n          <>\r\n            <Button\r\n              onClick={goto(`/${orgName}/dashboard`)}\r\n              className={Classes.MINIMAL}\r\n              icon=\"dashboard\"\r\n              text=\"Dashboard\"\r\n            />\r\n            <Button\r\n              onClick={createDraft}\r\n              className={Classes.MINIMAL}\r\n              icon=\"application\"\r\n              text=\"Create Draft\"\r\n            />\r\n          </>\r\n        )}\r\n      </NavbarGroup>\r\n      <NavbarGroup align={Alignment.RIGHT}>\r\n        {state.user ? (\r\n          <>\r\n            <Button icon=\"notifications\" className={Classes.MINIMAL} />\r\n            <Popover\r\n              content={\r\n                <Menu>\r\n                  <MenuItem onClick={logout} icon=\"log-out\" text=\"Log out\" />\r\n                  <MenuItem\r\n                    onClick={logoutAll}\r\n                    icon=\"globe\"\r\n                    text=\"Log out of all devices\"\r\n                  />\r\n                  <MenuItem icon=\"cog\" text=\"Settings\" />\r\n                </Menu>\r\n              }\r\n              position={Position.BOTTOM_LEFT}\r\n            >\r\n              <Button icon=\"caret-down\" className={Classes.MINIMAL} />\r\n            </Popover>\r\n          </>\r\n        ) : (\r\n          <>\r\n            <Button\r\n              onClick={goto(\"/signup\")}\r\n              className={Classes.MINIMAL}\r\n              text=\"Sign up\"\r\n            />\r\n            <Button\r\n              onClick={goto(\"/login\")}\r\n              intent={Intent.PRIMARY}\r\n              rightIcon=\"log-in\"\r\n              text=\"Log in\"\r\n            />\r\n          </>\r\n        )}\r\n      </NavbarGroup>\r\n    </Navbar>\r\n  );\r\n}\r\n","import React, { useContext } from \"react\";\r\nimport { InputGroup, Button, Intent } from \"@blueprintjs/core\";\r\nimport useFormInput from \"../hooks/useFormInput\";\r\nimport axios from \"axios\";\r\nimport { BASE_URL } from \"../constants\";\r\nimport { store } from \"../store\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { AppToaster } from \"../toaster\";\r\n\r\nexport default function OrgJoin() {\r\n  const history = useHistory();\r\n  const orgName = useFormInput(\"\");\r\n  const { state } = useContext(store);\r\n\r\n  async function create() {\r\n    if (!state.user) {\r\n      // User must be logged in to create an organization\r\n      AppToaster.show({\r\n        message: \"You need an account to create an organization.\",\r\n        action: {\r\n          onClick: () => history.push(\"/get-started\"),\r\n          text: \"Get Started\",\r\n        },\r\n        intent: Intent.DANGER,\r\n      });\r\n      return;\r\n    }\r\n\r\n    if (orgName.value.trim() === \"\") {\r\n      AppToaster.show({\r\n        message: \"Organization name cannot be blank\",\r\n        intent: Intent.DANGER,\r\n      });\r\n      return;\r\n    }\r\n\r\n    const data = {\r\n      name: orgName.value,\r\n      admins: [state.user._id],\r\n    };\r\n\r\n    try {\r\n      let result = await axios.post(`${BASE_URL}/api/v1/organization/`, data);\r\n      AppToaster.show({\r\n        message:\r\n          \"Successfully created organization. Redirecting to admin page.\",\r\n        intent: Intent.SUCCESS,\r\n      });\r\n      setTimeout(() => {\r\n        history.push(`/${result.data.organization.name}/admin`);\r\n      }, 3000);\r\n    } catch (err) {\r\n      AppToaster.show({\r\n        message: err.message,\r\n        intent: Intent.DANGER,\r\n      });\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div\r\n        style={{\r\n          width: \"550px\",\r\n          height: \"auto\",\r\n          position: \"absolute\",\r\n          top: \"50%\",\r\n          left: \"50%\",\r\n          transform: \"translate(-50%, -50%)\",\r\n          padding: \"30px\",\r\n        }}\r\n      >\r\n        <h1>Create an organization</h1>\r\n        <p>You will automatically be added as an admin to this organization.</p>\r\n        <InputGroup\r\n          placeholder=\"Organization Name\"\r\n          value={orgName.value}\r\n          onChange={orgName.onChange}\r\n          style={{ marginBottom: \"20px\" }}\r\n        />\r\n        <div style={{ textAlign: \"right\" }}>\r\n          <Button intent={Intent.PRIMARY} onClick={create} text=\"Create\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect, useContext } from \"react\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport \"./App.css\";\n\nimport Home from \"./components/Home.js\";\nimport Dashboard from \"./components/Dashboard.js\";\nimport Composer from \"./components/Composer\";\nimport Login from \"./components/Login\";\nimport Signup from \"./components/Signup\";\nimport OrgSignup from \"./components/OrgSignup\";\nimport Admin from \"./components/Admin\";\nimport OrgJoin from \"./components/OrgJoin\";\nimport Nav from \"./components/Nav\";\nimport OrgCreate from \"./components/OrgCreate\";\n\nimport axios from \"axios\";\nimport { BASE_URL } from \"./constants\";\nimport { setAccessToken } from \"./accessToken\";\nimport { store, actions } from \"./store\";\n\nimport { Spinner, Intent } from \"@blueprintjs/core\";\n\nfunction App() {\n  const { dispatch } = useContext(store);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    axios\n      .post(`${BASE_URL}/api/v1/auth/refresh-token`, null, {\n        withCredentials: true,\n      })\n      .then((res) => {\n        const { accessToken, user } = res.data;\n        if (accessToken && user) {\n          setAccessToken(accessToken);\n          dispatch({ type: actions.SET_USER, payload: user });\n        }\n      })\n      .catch((err) => {\n        console.log(err.message);\n      })\n      .finally(() => {\n        setLoading(false);\n      });\n  }, []);\n\n  useEffect(() => {\n    const REFRESH_TIME = 10 * 60 * 1000; // Ten Minutes\n    const interval = setInterval(() => {\n      axios\n        .post(`${BASE_URL}/api/v1/auth/refresh-token`, null, {\n          withCredentials: true,\n        })\n        .then((res) => {\n          if (res.data && res.data.accessToken) {\n            setAccessToken(res.data.accessToken);\n          }\n        })\n        .catch((err) => {\n          console.log(err.message);\n        });\n    }, REFRESH_TIME);\n\n    return () => clearInterval(interval);\n  }, []);\n\n  if (loading) {\n    return (\n      <div\n        style={{\n          width: \"min-content\",\n          position: \"absolute\",\n          top: \"50%\",\n          left: \"50%\",\n          transform: \"translate(-50%, -50%)\",\n        }}\n      >\n        <Spinner intent={Intent.NONE} />\n      </div>\n    );\n  }\n\n  return (\n    <Router>\n      <Switch>\n        <Route path=\"/\" exact component={Home} />\n        <Route path=\"/get-started\" component={OrgSignup} />\n        <Route path=\"/:orgName/admin\">\n          <Nav />\n          <Admin />\n        </Route>\n        <Route path=\"/:orgName/dashboard\">\n          <Nav />\n          <Dashboard />\n        </Route>\n        <Route path=\"/:orgName/compose\">\n          <Nav />\n          <Composer />\n        </Route>\n        <Route path=\"/login\" component={Login} />\n        <Route path=\"/signup\" component={Signup} />\n        <Route path=\"/join\" component={OrgJoin} />\n        <Route path=\"/create\" component={OrgCreate} />\n      </Switch>\n    </Router>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport \"@blueprintjs/core/lib/css/blueprint.css\";\nimport \"@blueprintjs/datetime/lib/css/blueprint-datetime.css\";\nimport \"@blueprintjs/select/lib/css/blueprint-select.css\";\nimport \"@blueprintjs/icons/lib/css/blueprint-icons.css\";\nimport \"./index.css\";\nimport axios from \"axios\";\nimport { getAccessToken } from \"./accessToken\";\nimport { StateProvider } from \"./store.js\";\n\n// Add a request interceptor\naxios.interceptors.request.use(\n  function (config) {\n    // Do something before request is sent\n    const accessToken = getAccessToken();\n    if (accessToken) {\n      config.headers[\"authorization\"] = `Bearer ${accessToken}`;\n    }\n    // console.log(config);\n    return config;\n  },\n  function (error) {\n    // Do something with request error\n    return Promise.reject(error);\n  }\n);\n\nReactDOM.render(\n  <React.StrictMode>\n    <StateProvider>\n      <App />\n    </StateProvider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = {\r\n  getJWT: () => {\r\n    const jwtToken = localStorage.getItem(\"JWT_TOKEN\");\r\n    return jwtToken;\r\n  },\r\n  getJWTConfig: () => {\r\n    const jwtToken = localStorage.getItem(\"JWT_TOKEN\");\r\n    const config = {\r\n      headers: {\r\n        Authorization: \"Bearer \" + jwtToken,\r\n      },\r\n    };\r\n    return config;\r\n  },\r\n  setJWT: (token) => {\r\n    localStorage.setItem(\"JWT_TOKEN\", token);\r\n  },\r\n  searchToJSON: (search) => {\r\n    return JSON.parse(\r\n      '{\"' +\r\n        decodeURI(search.substring(1))\r\n          .replace(/\"/g, '\\\\\"')\r\n          .replace(/&/g, '\",\"')\r\n          .replace(/=/g, '\":\"') +\r\n        '\"}'\r\n    );\r\n  },\r\n};\r\n"],"sourceRoot":""}