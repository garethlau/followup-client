{"version":3,"sources":["constants.js","assets/images/logo.png","assets/images/dashboard-demo.png","assets/images/composer-demo.png","components/Home.js","store.js","hooks/useFormInput.js","components/Dashboard.js","hooks/useSelectInput.js","toaster.js","components/ReviewerManager.js","hooks/useTagInput.js","components/Composer.js","hooks/useMedia.js","hooks/useDateInput.js","accessToken.js","components/Login.js","components/Signup.js","components/OrgSignup.js","components/Admin.js","components/OrgJoin.js","components/Nav.js","components/OrgCreate.js","components/Product.js","components/StatelessNav.js","App.js","serviceWorker.js","index.js","utils/index.js"],"names":["module","exports","BASE_URL","Home","history","useHistory","style","width","height","position","top","left","transform","padding","textAlign","alt","src","require","text","onClick","push","intent","Intent","PRIMARY","initialState","user","store","createContext","Provider","StateProvider","children","useReducer","state","action","console","log","type","actions","SET_USER","payload","CLEAR_USER","Error","dispatch","value","useFormInput","initialValue","useState","setValue","hasError","setHasError","helperText","setHelperText","clearError","onChange","e","target","clear","setError","msg","Dashboard","orgName","useParams","drafts","setDrafts","useContext","search","loading","setLoading","authorized","setAuthorized","orderBy","event","currentTarget","useSelectInput","useEffect","axios","get","then","response","data","catch","err","message","finally","destination","marginBottom","placeholder","options","overflow","bordered","interactive","minWidth","sort","a","b","aVers","versions","length","bVers","modifiedDate","sendDate","map","draft","id","latestVersion","containsSearch","elem","toLowerCase","includes","tags","some","subject","to","commitMessage","creator","firstName","passesFilter","_id","key","lastName","Date","toLocaleDateString","recipient","index","minimal","margin","parseInt","tag","reviewers","reviewer","approved","SUCCESS","DANGER","reduce","acc","curr","sent","icon","title","marginLeft","username","disabled","AppToaster","Toaster","create","className","Position","TOP","ReviewerManager","updated","setUpdated","isOpen","setIsOpen","members","Suggest","tmpMembers","setTempMembers","reviewerIds","JSON","stringify","filter","member","checked","utils","searchToJSON","window","location","draftId","post","show","usePortal","canEscapeKeyClose","onClose","Classes","DIALOG_BODY","label","tmp","DIALOG_FOOTER","DIALOG_FOOTER_ACTIONS","useTagInput","initialValues","values","setValues","set","add","Composer","columnCount","queries","defaultValue","mediaQueryLists","q","matchMedia","getValue","findIndex","mql","matches","handler","forEach","addListener","removeListener","useMedia","setVersions","from","initialDate","date","useDateInput","cc","bcc","RichTextEditor","createEmptyValue","body","setBody","setDraft","canEdit","setCanEdit","currVersion","setCurrVersion","comment","comments","setComments","setVersionData","EditorValue","createFromString","toString","content","version","result","jsonSearch","res","versionNumber","tmpVersions","i","setMembers","approve","reject","users","concat","admins","containerStyle","display","gridTemplateColumns","gridTemplateRows","inputStyle","border","columnGap","borderRadius","verticalAlign","small","marginTop","gridTemplateAreas","gridArea","author","growVertically","fill","substring","viewingVersion","formatDate","parseDate","str","popoverProps","BOTTOM","maxDate","rightElement","addOnBlur","tagProps","editorClassName","minHeight","spellCheck","leftIcon","accessToken","setAccessToken","token","Login","password","showPassword","setShowPassword","redirect","withCredentials","status","lockButton","WARNING","marginRight","Signup","email","OrgSignup","stepNum","setStepNum","signupData","orgData","name","organization","setTimeout","messsage","changeStepNum","next","errorMessage","trim","Admin","setUsers","setAdmins","isAdmin","OrgJoin","replace","patch","Nav","organizations","setOrganizations","goto","align","Alignment","LEFT","modifiers","arrow","enabled","rightIcon","BOTTOM_RIGHT","MINIMAL","RIGHT","BOTTOM_LEFT","imgStyle","boxShadow","pStyle","Product","StatelessNav","outlined","App","interval","setInterval","clearInterval","NONE","path","exact","component","Boolean","hostname","match","interceptors","request","use","config","headers","error","Promise","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","getJWT","localStorage","getItem","getJWTConfig","Authorization","setJWT","setItem","parse","decodeURI"],"mappings":"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","file":"static/js/main.02f5aa27.chunk.js","sourcesContent":["module.exports = {\r\n    BASE_URL: process.env.NODE_ENV === \"production\" ? \"https://followup.api.garethdev.space\" : \"\",\r\n}","module.exports = __webpack_public_path__ + \"static/media/logo.9a8b42d6.png\";","module.exports = __webpack_public_path__ + \"static/media/dashboard-demo.93dbc3b8.png\";","module.exports = __webpack_public_path__ + \"static/media/composer-demo.c5866bee.png\";","import React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { Button, Intent } from \"@blueprintjs/core\";\r\n\r\nexport default function Home() {\r\n  const history = useHistory();\r\n  return (\r\n    <div>\r\n      <div\r\n        style={{\r\n          width: \"550px\",\r\n          height: \"auto\",\r\n          position: \"absolute\",\r\n          top: \"50%\",\r\n          left: \"50%\",\r\n          transform: \"translate(-50%, -50%)\",\r\n          padding: \"30px\",\r\n          textAlign: \"center\",\r\n        }}\r\n      >\r\n        <img\r\n          alt=\"logo\"\r\n          style={{ width: \"150px\" }}\r\n          src={require(\"../assets/images/logo.png\")}\r\n        />\r\n        <h1>Followup</h1>\r\n        <p>Email composer and manager for teams.</p>\r\n        <Button\r\n          text=\"Get Started\"\r\n          onClick={() => history.push(\"/get-started\")}\r\n          intent={Intent.PRIMARY}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { createContext, useReducer } from \"react\";\r\n\r\nconst initialState = {\r\n  user: null,\r\n};\r\nconst store = createContext(initialState);\r\nconst { Provider } = store;\r\n\r\nconst StateProvider = ({ children }) => {\r\n  const [state, dispatch] = useReducer((state, action) => {\r\n    console.log(action);\r\n    switch (action.type) {\r\n      case actions.SET_USER:\r\n        return { ...state, user: action.payload };\r\n      case actions.CLEAR_USER:\r\n        return { ...state, user: null };\r\n      default:\r\n        throw new Error();\r\n    }\r\n  }, initialState);\r\n\r\n  return <Provider value={{ state, dispatch }}>{children}</Provider>;\r\n};\r\n\r\nconst actions = {\r\n  SET_USER: \"SET_USER\",\r\n  CLEAR_USER: \"CLEAR_USER\",\r\n};\r\n\r\nexport { store, StateProvider, actions };","import { useState } from \"react\";\r\n\r\nconst useFormInput = (initialValue) => {\r\n  const [value, setValue] = useState(initialValue);\r\n  const [hasError, setHasError] = useState(false);\r\n  const [helperText, setHelperText] = useState(\"\");\r\n\r\n  function setError(msg) {\r\n    setHasError(true);\r\n    setHelperText(msg);\r\n  }\r\n\r\n  function clearError() {\r\n    setHasError(false);\r\n    setHelperText(\"\");\r\n  }\r\n\r\n  function handleChange(e) {\r\n    clearError();\r\n    setValue(e.target.value);\r\n  }\r\n\r\n  function clear() {\r\n    setValue(\"\");\r\n  }\r\n  return {\r\n    value: value,\r\n    setValue: setValue,\r\n    onChange: handleChange,\r\n    clear: clear,\r\n    hasError: hasError,\r\n    helperText: helperText,\r\n    setError: setError,\r\n    clearError: clearError,\r\n  };\r\n};\r\n\r\nexport default useFormInput;\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\nimport {\r\n  Tag,\r\n  ControlGroup,\r\n  HTMLSelect,\r\n  Code,\r\n  Button,\r\n  Spinner,\r\n  Callout,\r\n  Intent,\r\n  HTMLTable,\r\n  InputGroup,\r\n} from \"@blueprintjs/core\";\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { BASE_URL } from \"../constants\";\r\nimport { store } from \"../store\";\r\nimport useFormInput from \"../hooks/useFormInput\";\r\nimport useSelectInput from \"../hooks/useSelectInput\";\r\n\r\nexport default function Dashboard() {\r\n  const { orgName } = useParams();\r\n  const [drafts, setDrafts] = useState([]);\r\n  const history = useHistory();\r\n  const { state } = useContext(store);\r\n  const search = useFormInput(\"\");\r\n  const [loading, setLoading] = useState(true);\r\n  const [authorized, setAuthorized] = useState(false);\r\n  const orderBy = useSelectInput(\"Modified Date - ASC\");\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .get(`${BASE_URL}/api/v1/organization/${orgName}/drafts`)\r\n      .then((response) => {\r\n        // console.log(response);\r\n        setDrafts(response.data.drafts);\r\n        setAuthorized(true);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err.message);\r\n        setAuthorized(false);\r\n      })\r\n      .finally(() => {\r\n        setLoading(false);\r\n      });\r\n  }, [orgName]);\r\n\r\n  function edit(id) {\r\n    return function () {\r\n      history.push(`/${orgName}/compose?draftId=${id}`);\r\n    };\r\n  }\r\n\r\n  function handleQueryChange(e) {\r\n    search.onChange(e);\r\n  }\r\n\r\n  const goto = (destination) => () => {\r\n    history.push(destination);\r\n  };\r\n\r\n  function passesFilter(draft) {\r\n    let latestVersion =\r\n      draft.versions.length > 0\r\n        ? draft.versions[draft.versions.length - 1]\r\n        : null;\r\n\r\n    function containsSearch(elem) {\r\n      return elem.toLowerCase().includes(search.value.toLowerCase());\r\n    }\r\n\r\n    return (\r\n      (latestVersion && latestVersion.tags.some(containsSearch)) ||\r\n      (latestVersion &&\r\n        latestVersion.subject\r\n          .toLowerCase()\r\n          .includes(search.value.toLowerCase())) ||\r\n      (latestVersion && latestVersion.to.some(containsSearch)) ||\r\n      (latestVersion &&\r\n        latestVersion.commitMessage\r\n          .toLowerCase()\r\n          .includes(search.value.toLowerCase())) ||\r\n      draft.creator.firstName.toLowerCase().includes(search.value.toLowerCase())\r\n    );\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <div\r\n        style={{\r\n          width: \"min-content\",\r\n          position: \"absolute\",\r\n          top: \"50%\",\r\n          left: \"50%\",\r\n          transform: \"translate(-50%, -50%)\",\r\n        }}\r\n      >\r\n        <Spinner intent={Intent.PRIMARY} />\r\n      </div>\r\n    );\r\n  }\r\n  if (!authorized) {\r\n    return (\r\n      <div\r\n        style={{\r\n          width: \"min-content\",\r\n          position: \"absolute\",\r\n          top: \"50%\",\r\n          left: \"50%\",\r\n          transform: \"translate(-50%, -50%)\",\r\n        }}\r\n      >\r\n        <Callout icon=\"disable\" title=\"Not authorized\">\r\n          <div style={{ width: \"350px\" }}>\r\n            {state.user ? (\r\n              <>\r\n                <p>\r\n                  You're not a member of this organization. Want in? Ask for\r\n                  access or switch to an account with permission.\r\n                </p>\r\n                <p>\r\n                  Currently logged in as:{\" \"}\r\n                  <Code style={{ marginLeft: \"5px\" }}>\r\n                    {state.user.username}\r\n                  </Code>\r\n                </p>\r\n                <Button\r\n                  intent={Intent.PRIMARY}\r\n                  text=\"Request Access\"\r\n                  disabled\r\n                />\r\n              </>\r\n            ) : (\r\n              <>\r\n                <p style={{ width: \"350px\" }}>\r\n                  You're currently not logged in. You must be logged in to\r\n                  continue.{\" \"}\r\n                </p>\r\n                <Button\r\n                  intent={Intent.PRIMARY}\r\n                  onClick={goto(`/login?redirect=/${orgName}/dashboard`)}\r\n                  text=\"Log in\"\r\n                />\r\n              </>\r\n            )}\r\n          </div>\r\n        </Callout>\r\n      </div>\r\n    );\r\n  }\r\n  return (\r\n    <div style={{ padding: \"20px\" }}>\r\n      <div style={{ width: \"250px\", marginBottom: \"20px\" }}>\r\n        <ControlGroup>\r\n          <InputGroup\r\n            onChange={handleQueryChange}\r\n            value={search.value}\r\n            placeholder=\"I'm looking for...\"\r\n          />\r\n          <HTMLSelect\r\n            options={[\r\n              \"Send Date - ASC\",\r\n              \"Send Date - DESC\",\r\n              \"Modified Date - ASC\",\r\n              \"Modified Date - DESC\",\r\n            ]}\r\n            onChange={orderBy.onChange}\r\n            value={orderBy.value}\r\n          />\r\n        </ControlGroup>\r\n      </div>\r\n\r\n      <div style={{ overflow: \"auto\" }}>\r\n        <HTMLTable bordered interactive>\r\n          <thead>\r\n            <tr>\r\n              <th style={{ minWidth: \"150px\" }}>Creator</th>\r\n              <th style={{ minWidth: \"100px\" }}>Versions</th>\r\n              <th style={{ minWidth: \"100px\" }}>Send Date</th>\r\n              <th style={{ minWidth: \"250px\" }}>To</th>\r\n              <th style={{ minWidth: \"250px\" }}>Subject</th>\r\n              <th style={{ minWidth: \"125px\" }}>Last Modified</th>\r\n              <th style={{ minWidth: \"250px\" }}>Latest Commit Message</th>\r\n              <th style={{ minWidth: \"250px\" }}>Tags</th>\r\n              <th style={{ minWidth: \"150px\" }}>Reviewers</th>\r\n              <th style={{ minWidth: \"150px\" }}>Approvals</th>\r\n              <th style={{ minWidth: \"100px\" }}>Status</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {drafts\r\n              .sort((a, b) => {\r\n                let aVers =\r\n                  a.versions.length > 0\r\n                    ? a.versions[a.versions.length - 1]\r\n                    : null;\r\n                let bVers =\r\n                  b.versions.length > 0\r\n                    ? b.versions[b.versions.length - 1]\r\n                    : null;\r\n\r\n                if (orderBy.value === \"Modified Date - ASC\") {\r\n                  if (!aVers && !bVers) return 0;\r\n                  else if (!bVers) return 1;\r\n                  else if (!aVers) return -1;\r\n                  else {\r\n                    return aVers.modifiedDate >= bVers.modifiedDate ? -1 : 1;\r\n                  }\r\n                } else if (orderBy.value === \"Modified Date - DESC\") {\r\n                  if (!aVers && !bVers) return 0;\r\n                  else if (!bVers) return -1;\r\n                  else if (!aVers) return 1;\r\n                  else {\r\n                    return aVers.modifiedDate >= bVers.modifiedDate ? 1 : -1;\r\n                  }\r\n                } else if (orderBy.value === \"Send Date - ASC\") {\r\n                  if (!aVers && !bVers) return 0;\r\n                  else if (!bVers) return 1;\r\n                  else if (!aVers) return -1;\r\n                  else {\r\n                    return aVers.sendDate >= bVers.sendDate ? -1 : 1;\r\n                  }\r\n                } else if (orderBy.value === \"Send Date - DESC\") {\r\n                  if (!aVers && !bVers) return 0;\r\n                  else if (!bVers) return -1;\r\n                  else if (!aVers) return 1;\r\n                  else {\r\n                    return aVers.sendDate >= bVers.sendDate ? 1 : -1;\r\n                  }\r\n                }\r\n              })\r\n              .map((draft) => {\r\n                let latestVersion =\r\n                  draft.versions.length > 0\r\n                    ? draft.versions[draft.versions.length - 1]\r\n                    : null;\r\n                if (passesFilter(draft)) {\r\n                  return (\r\n                    <tr onClick={edit(draft._id)} key={draft._id}>\r\n                      <td>\r\n                        {draft.creator.firstName + \" \" + draft.creator.lastName}\r\n                      </td>\r\n                      <td style={{ textAlign: \"center\" }}>\r\n                        {draft.versions.length}\r\n                      </td>\r\n\r\n                      <td>\r\n                        {latestVersion &&\r\n                          new Date(latestVersion.sendDate).toLocaleDateString()}\r\n                      </td>\r\n\r\n                      <td>\r\n                        {latestVersion &&\r\n                          latestVersion.to.map((recipient, index) => (\r\n                            <Tag\r\n                              minimal\r\n                              key={index}\r\n                              style={{ margin: \"0px 5px 5px 0px\" }}\r\n                            >\r\n                              {recipient}\r\n                            </Tag>\r\n                          ))}\r\n                      </td>\r\n\r\n                      <td>{latestVersion ? latestVersion.subject : \"\"}</td>\r\n\r\n                      <td style={{ textAlign: \"center\" }}>\r\n                        {latestVersion\r\n                          ? new Date(\r\n                              parseInt(latestVersion.modifiedDate)\r\n                            ).toLocaleDateString()\r\n                          : \"N/A\"}\r\n                      </td>\r\n\r\n                      <td>{latestVersion && latestVersion.commitMessage}</td>\r\n\r\n                      <td>\r\n                        {latestVersion &&\r\n                          latestVersion.tags.map((tag, index) => (\r\n                            <Tag\r\n                              minimal\r\n                              key={index}\r\n                              style={{ margin: \"0px 5px 5px 0px\" }}\r\n                            >\r\n                              {tag}\r\n                            </Tag>\r\n                          ))}\r\n                      </td>\r\n\r\n                      <td>\r\n                        {draft.reviewers.map((reviewer) => {\r\n                          return (\r\n                            <Tag\r\n                              key={reviewer.id}\r\n                              style={{ margin: \"0px 5px 5px 0px\" }}\r\n                              intent={\r\n                                reviewer.approved\r\n                                  ? Intent.SUCCESS\r\n                                  : Intent.DANGER\r\n                              }\r\n                              minimal={\r\n                                !state.user || reviewer.id !== state.user._id\r\n                              }\r\n                            >\r\n                              {reviewer.firstName[0] + reviewer.lastName[0]}\r\n                            </Tag>\r\n                          );\r\n                        })}\r\n                      </td>\r\n\r\n                      <td style={{ textAlign: \"center\" }}>\r\n                        {draft.reviewers.reduce((acc, curr) => {\r\n                          if (curr.approved) acc++;\r\n                          return acc;\r\n                        }, 0)}\r\n                        / {draft.reviewers.length}\r\n                      </td>\r\n\r\n                      <td>{draft.sent ? \"Sent\" : \"Not Sent\"}</td>\r\n                    </tr>\r\n                  );\r\n                } else return null;\r\n              })}\r\n          </tbody>\r\n        </HTMLTable>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useState } from \"react\";\r\n\r\nexport default function useSelectInput(initialValue) {\r\n  const [value, setValue] = useState(initialValue);\r\n\r\n  function onChange(event) {\r\n    setValue(event.currentTarget.value);\r\n  }\r\n\r\n  return {\r\n    value,\r\n    onChange,\r\n  };\r\n}\r\n","import { Position, Toaster } from \"@blueprintjs/core\";\r\n\r\n/** Singleton toaster instance. Create separate instances for different options. */\r\nexport const AppToaster = Toaster.create({\r\n  className: \"recipe-toaster\",\r\n  position: Position.TOP,\r\n});\r\n","import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  Dialog,\r\n  Classes,\r\n  MenuItem,\r\n  AnchorButton,\r\n  Button,\r\n  Intent,\r\n  HTMLSelect,\r\n  Checkbox,\r\n} from \"@blueprintjs/core\";\r\nimport { Suggest } from \"@blueprintjs/select\";\r\nimport utils from \"../utils\";\r\nimport { BASE_URL } from \"../constants\";\r\nimport axios from \"axios\";\r\nimport { AppToaster } from \"../toaster\";\r\n\r\nexport default function ReviewerManager({\r\n  updated,\r\n  setUpdated,\r\n  isOpen,\r\n  setIsOpen,\r\n  members,\r\n  reviewers,\r\n}) {\r\n  const ReviewerSuggest = Suggest;\r\n\r\n  const [tmpMembers, setTempMembers] = useState([]);\r\n\r\n  async function saveReviewers() {\r\n    let data = {\r\n      reviewerIds: JSON.stringify(\r\n        tmpMembers\r\n          .filter((member) => member.checked)\r\n          .map((member) => member._id)\r\n      ),\r\n    };\r\n    let { draftId } = utils.searchToJSON(window.location.search);\r\n\r\n    try {\r\n      let result = await axios.post(\r\n        `${BASE_URL}/api/v1/draft/${draftId}/reviewer`,\r\n        data\r\n      );\r\n      // console.log(result);\r\n      setIsOpen(false);\r\n      AppToaster.show({\r\n        message: \"Succesfully updated reviewers\",\r\n        intent: Intent.SUCCESS,\r\n      });\r\n      setUpdated(updated + 1);\r\n    } catch (err) {\r\n      AppToaster.show({\r\n        message: err.message,\r\n        intent: Intent.DANGER,\r\n      });\r\n    }\r\n  }\r\n  const toggleCheck = (_id) => (event) => {\r\n    let tmp = tmpMembers.map((member) => {\r\n      if (member._id === _id) {\r\n        member.checked = event.target.checked;\r\n      }\r\n      return member;\r\n    });\r\n    setTempMembers(tmp);\r\n  };\r\n\r\n  useEffect(() => {\r\n    setTempMembers(\r\n      members.map((member) => {\r\n        return {\r\n          ...member,\r\n          checked: reviewers\r\n            .map((reviewer) => reviewer.id)\r\n            .includes(member._id),\r\n        };\r\n      })\r\n    );\r\n  }, [reviewers, members]);\r\n\r\n  return (\r\n    <Dialog\r\n      isOpen={isOpen}\r\n      usePortal={true}\r\n      canEscapeKeyClose={true}\r\n      title={\"Add reviewer\"}\r\n      onClose={() => setIsOpen(false)}\r\n    >\r\n      <div className={Classes.DIALOG_BODY}>\r\n        {tmpMembers.map((member) => {\r\n          return (\r\n            <Checkbox\r\n              label={`${member.firstName} ${member.lastName}`}\r\n              checked={member.checked}\r\n              onChange={toggleCheck(member._id)}\r\n            />\r\n          );\r\n        })}\r\n      </div>\r\n      <div className={Classes.DIALOG_FOOTER}>\r\n        <div className={Classes.DIALOG_FOOTER_ACTIONS}>\r\n          <Button onClick={() => setIsOpen(false)}>Close</Button>\r\n\r\n          <AnchorButton onClick={saveReviewers} intent={Intent.PRIMARY}>\r\n            Save\r\n          </AnchorButton>\r\n        </div>\r\n      </div>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\n/*\r\n\r\n        <ReviewerSuggest\r\n          onItemSelect={(item) => console.log(item)}\r\n          items={[\r\n            { name: \"Gareth Lau\", email: \"gareth@mail.com\" },\r\n            { name: \"John Doe\", email: \"Johndoe@mail.com\" },\r\n          ]}\r\n          inputValueRenderer={(item) => item.name}\r\n          itemRenderer={(item, { handleClick, modifiers, query }) => {\r\n            return <MenuItem onClick={handleClick} text={item.name} />;\r\n          }}\r\n          onQueryChange={(query) => console.log(query)}\r\n        />\r\n\r\n */\r\n","import { useState } from \"react\";\r\n\r\nexport default function useTagInput(initialValues) {\r\n  const [values, setValues] = useState(initialValues || []);\r\n\r\n  function clear() {\r\n    setValues([]);\r\n  }\r\n\r\n  function add(tag) {\r\n    setValues([...values, tag]);\r\n  }\r\n\r\n  function set(tags) {\r\n    setValues(tags);\r\n  }\r\n  function onChange(tags) {\r\n    setValues(tags);\r\n  }\r\n  return {\r\n    values,\r\n    clear,\r\n    set,\r\n    add,\r\n    onChange,\r\n  };\r\n}\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\nimport useMedia from \"../hooks/useMedia\";\r\nimport ReviewerManager from \"./ReviewerManager\";\r\nimport { AppToaster } from \"../toaster\";\r\n\r\nimport {\r\n  Intent,\r\n  InputGroup,\r\n  HTMLSelect,\r\n  TagInput,\r\n  Button,\r\n  Card,\r\n  TextArea,\r\n  Divider,\r\n  Dialog,\r\n  Classes,\r\n  AnchorButton,\r\n  MenuItem,\r\n  Position,\r\n  Callout,\r\n  HTMLTable,\r\n} from \"@blueprintjs/core\";\r\n\r\nimport { DateInput, TimePrecision } from \"@blueprintjs/datetime\";\r\n\r\nimport useFormInput from \"../hooks/useFormInput\";\r\nimport useTagInput from \"../hooks/useTagInput\";\r\nimport useDateInput from \"../hooks/useDateInput\";\r\nimport RichTextEditor, { EditorValue } from \"react-rte\";\r\nimport utils from \"../utils\";\r\nimport axios from \"axios\";\r\nimport { BASE_URL } from \"../constants\";\r\nimport { useParams, useHistory } from \"react-router-dom\";\r\nimport { store } from \"../store\";\r\n\r\nexport default function Composer() {\r\n  const { state } = useContext(store);\r\n  const columnCount = useMedia([\"(min-width: 550px)\"], [2], 1);\r\n  const history = useHistory();\r\n  const { orgName } = useParams();\r\n  const [updated, setUpdated] = useState(0);\r\n  // Version and editor state\r\n  const [versions, setVersions] = useState([]);\r\n  const subject = useFormInput(\"\");\r\n  const from = useFormInput(\"\");\r\n  const sendDate = useDateInput(new Date());\r\n  const commitMessage = useFormInput(\"\");\r\n  const to = useTagInput();\r\n  const cc = useTagInput();\r\n  const bcc = useTagInput();\r\n  const tags = useTagInput();\r\n  const [body, setBody] = useState(RichTextEditor.createEmptyValue());\r\n  const [draft, setDraft] = useState({});\r\n  const [canEdit, setCanEdit] = useState(false);\r\n  const [currVersion, setCurrVersion] = useState(\"v0\");\r\n\r\n  // Comment state\r\n  const comment = useFormInput(\"\");\r\n  const [comments, setComments] = useState([]);\r\n\r\n  // Reviewer state\r\n  const [isOpen, setIsOpen] = useState(false);\r\n\r\n  /* FUNCTIONS */\r\n\r\n  // Check for draft Id in URL\r\n  useEffect(() => {\r\n    let jsonSearch = utils.searchToJSON(window.location.search);\r\n    if (jsonSearch.draftId) {\r\n      // Get data\r\n      axios\r\n        .get(`${BASE_URL}/api/v1/draft/${jsonSearch.draftId}`)\r\n        .then((res) => {\r\n          let { draft } = res.data;\r\n          setDraft(draft);\r\n          let versionNumber = draft.versions.length;\r\n\r\n          // Build the version select dropdown\r\n          let tmpVersions = [];\r\n          for (let i = 1; i <= versionNumber; i++) {\r\n            tmpVersions.push(`v${i}`);\r\n          }\r\n          setVersions(tmpVersions);\r\n          setCurrVersion(`v${versionNumber}`);\r\n          // We have set the current version to the most recent version so it must be editable\r\n          setCanEdit(true);\r\n          setVersionData(draft.versions[draft.versions.length - 1]);\r\n\r\n          // Set comment data\r\n          setComments(draft.comments);\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        });\r\n    }\r\n  }, [updated]);\r\n\r\n  function onBodyChange(value) {\r\n    setBody(value);\r\n  }\r\n\r\n  // Sset the data\r\n  function setVersionData(data) {\r\n    if (!data) return; \r\n    subject.setValue(data.subject);\r\n    sendDate.set(data.sendDate);\r\n    to.set(data.to);\r\n    cc.set(data.cc);\r\n    bcc.set(data.bcc);\r\n    tags.set(data.tags);\r\n    from.setValue(data.from);\r\n    commitMessage.setValue(data.commitMessage);\r\n    setBody(EditorValue.createFromString(data.body, \"html\"));\r\n  }\r\n\r\n  function changeVersion(event) {\r\n    setCurrVersion(event.currentTarget.value);\r\n    let versionNumber = event.currentTarget.value.substring(1) - 1;\r\n    let viewingVersion = draft.versions[versionNumber];\r\n    if (versionNumber + 1 === draft.versions.length) {\r\n      setCanEdit(true);\r\n    } else {\r\n      setCanEdit(false);\r\n    }\r\n\r\n    setVersionData(viewingVersion);\r\n  }\r\n\r\n  // Save new version\r\n  async function save() {\r\n    let data = {\r\n      subject: subject.value,\r\n      sendDate: sendDate.value,\r\n      from: from.value,\r\n      to: to.values,\r\n      cc: cc.values,\r\n      bcc: bcc.values,\r\n      body: body.toString(\"html\"),\r\n      tags: tags.values,\r\n      commitMessage: commitMessage.value,\r\n    };\r\n    let { draftId } = utils.searchToJSON(window.location.search);\r\n    try {\r\n      await axios.post(`${BASE_URL}/api/v1/draft/${draftId}/version`, data);\r\n      AppToaster.show({\r\n        message: \"Draft saved\",\r\n        action: {\r\n          onClick: () => history.push(`/${orgName}/dashboard`),\r\n          text: \"Go to dashboard\",\r\n        },\r\n        intent: Intent.SUCCESS,\r\n      });\r\n      setUpdated(updated + 1);\r\n    } catch (err) {\r\n      console.log(err);\r\n\r\n      AppToaster.show({\r\n        message: err.message,\r\n        intent: Intent.DANGER,\r\n      });\r\n    }\r\n  }\r\n\r\n  // Create a comment\r\n  async function saveComment() {\r\n    let data = {\r\n      content: comment.value,\r\n      version: currVersion,\r\n    };\r\n\r\n    let { draftId } = utils.searchToJSON(window.location.search);\r\n    try {\r\n      let result = await axios.post(\r\n        `${BASE_URL}/api/v1/draft/${draftId}/comment`,\r\n        data\r\n      );\r\n      comment.clear();\r\n      setComments(result.data.comments);\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  }\r\n\r\n  const [members, setMembers] = useState([]);\r\n  useEffect(() => {\r\n    axios\r\n      .get(`${BASE_URL}/api/v1/organization/${orgName}/users`)\r\n      .then((res) => {\r\n        setMembers(res.data.users.concat(res.data.admins));\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }, [orgName]);\r\n\r\n  async function approve() {\r\n    let { draftId } = utils.searchToJSON(window.location.search);\r\n    try {\r\n      await axios.post(`${BASE_URL}/api/v1/draft/${draftId}/approve`);\r\n      AppToaster.show({\r\n        message: \"You've approved this draft\",\r\n        intent: Intent.SUCCESS,\r\n      });\r\n      setUpdated(updated + 1);\r\n    } catch (err) {\r\n      console.log(err.message);\r\n      AppToaster.show({ message: err.message, intent: Intent.DANGER });\r\n    }\r\n  }\r\n\r\n  async function reject() {\r\n    let { draftId } = utils.searchToJSON(window.location.search);\r\n    try {\r\n      await axios.post(`${BASE_URL}/api/v1/draft/${draftId}/reject`);\r\n      AppToaster.show({\r\n        message: \"You've rejected this draft\",\r\n        intent: Intent.SUCCESS,\r\n      });\r\n      setUpdated(updated + 1);\r\n    } catch (err) {\r\n      console.log(err.message);\r\n      AppToaster.show({ message: err.message, intent: Intent.DANGER });\r\n    }\r\n  }\r\n\r\n  /* STYLES */\r\n\r\n  const containerStyle = {\r\n    display: \"grid\",\r\n    gridTemplateColumns: columnCount === 2 ? \"1fr 1fr\" : \"1fr\",\r\n    gridTemplateRows: columnCount === 2 ? \"1fr\" : \"auto auto\",\r\n  };\r\n\r\n  const inputStyle = {\r\n    width: \"250px\",\r\n    marginBottom: \"10px\",\r\n  };\r\n\r\n  /* HTML */\r\n\r\n  return (\r\n    <div style={containerStyle}>\r\n      <div style={{ padding: \"20px\" }}>\r\n        <div style={{ border: \"solid 1px lightgrey\", padding: \"20px\" }}>\r\n          <h1>Reviewers</h1>\r\n          <Divider />\r\n          {draft.reviewers &&\r\n            draft.reviewers.length > 0 ?\r\n            draft.reviewers.map((reviewer) => (\r\n              <div\r\n                style={{\r\n                  display: \"grid\",\r\n                  gridTemplateColumns: \"24px 150px 1fr 150px 100px\",\r\n                  columnGap: \"10px\",\r\n                  gridTemplateRows: \"24px\",\r\n                  margin: \"10px 0px\",\r\n                  padding: \"0px 10px\",\r\n                }}\r\n              >\r\n                <div>\r\n                  <img\r\n                    style={{\r\n                      borderRadius: \"50%\",\r\n                      width: \"20px\",\r\n                      height: \"20px\",\r\n                      margin: \"2px\",\r\n                    }}\r\n                    src=\"https://www.w3schools.com/howto/img_avatar.png\"\r\n                    alt=\"profile\"\r\n                  />\r\n                </div>\r\n\r\n                <div style={{ display: \"table\", height: \"24px\" }}>\r\n                  <div\r\n                    style={{ display: \"table-cell\", verticalAlign: \"middle\" }}\r\n                  >\r\n                    {reviewer.firstName + \" \" + reviewer.lastName}\r\n                  </div>\r\n                </div>\r\n\r\n                <div></div>\r\n\r\n                <div style={{ display: \"table\", height: \"24px\" }}>\r\n                  <div style={{ display: \"table-cell\", verticalAlign: \"middle\" }}>\r\n                    {reviewer.approved ? (\r\n                      <div style={{ textAlign: \"center\" }}>Approved</div>\r\n                    ) : (\r\n                      <div style={{ textAlign: \"center\" }}>Not Approved</div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n\r\n                <div style={{ display: \"table\", height: \"24px\" }}>\r\n                  <div\r\n                    style={{ display: \"table-cell\", verticalAlign: \"middle\" }}\r\n                  >\r\n                    {!state.user ||\r\n                    reviewer.id !==\r\n                      state.user._id ? null : reviewer.approved ? (\r\n                      <Button\r\n                        text=\"Reject\"\r\n                        onClick={reject}\r\n                        intent={Intent.DANGER}\r\n                        small\r\n                      />\r\n                    ) : (\r\n                      <Button\r\n                        text=\"Approve\"\r\n                        onClick={approve}\r\n                        intent={Intent.SUCCESS}\r\n                        small\r\n                      />\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )) : \"No assigned reviewers.\"}\r\n          <Divider />\r\n          <div style={{ textAlign: \"right\", marginTop: \"10px\" }}>\r\n            <Button intent={Intent.PRIMARY} onClick={() => setIsOpen(true)} text=\"Manage Reviewers\" />\r\n            <ReviewerManager\r\n              updated={updated}\r\n              setUpdated={setUpdated}\r\n              reviewers={draft.reviewers || []}\r\n              members={members}\r\n              isOpen={isOpen}\r\n              setIsOpen={setIsOpen}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div\r\n          style={{\r\n            border: \"solid 1px lightgrey\",\r\n            padding: \"20px\",\r\n            marginTop: \"20px\",\r\n          }}\r\n        >\r\n          <h1>Comments</h1>\r\n          <Divider />\r\n          {comments.length === 0\r\n            ? \"No comments\"\r\n            : comments.map((comment) => (\r\n                <div\r\n                  style={{\r\n                    display: \"grid\",\r\n                    gridTemplateAreas:\r\n                      \"'pfp name-date version' 'pfp body version' '. body .' \",\r\n                    gridTemplateColumns: \"48px 1fr 48px\",\r\n                    gridTemplateRows: \"24px 24px auto\",\r\n                    marginTop: \"10px\",\r\n                    columnGap: \"10px\",\r\n                  }}\r\n                >\r\n                  <div style={{ gridArea: \"pfp\" }}>\r\n                    <img\r\n                      style={{\r\n                        borderRadius: \"50%\",\r\n                        width: \"40px\",\r\n                        height: \"40px\",\r\n                        margin: \"4px\",\r\n                      }}\r\n                      src=\"https://www.w3schools.com/howto/img_avatar.png\"\r\n                      alt=\"profile\"\r\n                    />\r\n                  </div>\r\n                  <div style={{ gridArea: \"name-date\" }}>\r\n                    {comment.author.firstName} {comment.author.lastName} -{\" \"}\r\n                    {new Date(parseInt(comment.date)).toLocaleDateString()}\r\n                  </div>\r\n                  <div style={{ gridArea: \"version\" }}> {comment.version}</div>\r\n                  <div style={{ gridArea: \"body\" }}>{comment.content}</div>\r\n                </div>\r\n              ))}\r\n          <Divider />\r\n          <TextArea\r\n            style={{ marginTop: \"10px\" }}\r\n            growVertically={true}\r\n            intent={Intent.PRIMARY}\r\n            fill={true}\r\n            placeholder=\"Comment...\"\r\n            value={comment.value}\r\n            onChange={comment.onChange}\r\n          />\r\n          <div style={{ marginTop: \"10px\", textAlign: \"right\" }}>\r\n            <Button\r\n              text=\"Comment\"\r\n              onClick={saveComment}\r\n              intent={Intent.PRIMARY}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div style={{ padding: \"20px\" }}>\r\n        <div style={{ border: \"solid 1px lightgrey\", padding: \"20px\" }}>\r\n          <div>\r\n            <HTMLSelect\r\n              onChange={changeVersion}\r\n              style={{ marginBottom: \"10px\" }}\r\n              options={versions}\r\n              value={currVersion}\r\n            />\r\n          </div>\r\n          <InputGroup\r\n            style={inputStyle}\r\n            value={subject.value}\r\n            onChange={subject.onChange}\r\n            placeholder=\"Subject\"\r\n            disabled={!canEdit}\r\n          />\r\n          <div style={inputStyle}>\r\n            <DateInput\r\n              fill\r\n              formatDate={(date) => date.toLocaleDateString()}\r\n              parseDate={(str) => new Date(str)}\r\n              value={sendDate.value}\r\n              placeholder={\"Send Date\"}\r\n              onChange={sendDate.onChange}\r\n              popoverProps={{ position: Position.BOTTOM }}\r\n              disabled={!canEdit}\r\n              maxDate={new Date(1893562264171)}\r\n            />\r\n          </div>\r\n          <InputGroup\r\n            value={from.value}\r\n            onChange={from.onChange}\r\n            style={inputStyle}\r\n            placeholder=\"From\"\r\n            disabled={!canEdit}\r\n          />\r\n          <div style={{ marginBottom: \"10px\" }}>\r\n            <TagInput\r\n              placeholder=\"To\"\r\n              values={to.values}\r\n              onChange={to.onChange}\r\n              rightElement={\r\n                to.values.length > 0 ? (\r\n                  <Button\r\n                    onClick={() => to.clear()}\r\n                    icon=\"cross\"\r\n                    minimal={true}\r\n                  />\r\n                ) : null\r\n              }\r\n              addOnBlur={true}\r\n              tagProps={{ minimal: true }}\r\n              disabled={!canEdit}\r\n            />\r\n          </div>\r\n\r\n          <div style={{ marginBottom: \"10px\" }}>\r\n            <TagInput\r\n              placeholder=\"Cc\"\r\n              values={cc.values}\r\n              onChange={cc.onChange}\r\n              rightElement={\r\n                cc.values.length > 0 ? (\r\n                  <Button\r\n                    onClick={() => cc.clear()}\r\n                    icon=\"cross\"\r\n                    minimal={true}\r\n                  />\r\n                ) : null\r\n              }\r\n              addOnBlur={true}\r\n              tagProps={{ minimal: true }}\r\n              disabled={!canEdit}\r\n            />\r\n          </div>\r\n          <div style={{ marginBottom: \"10px\" }}>\r\n            <TagInput\r\n              placeholder=\"Bcc\"\r\n              values={bcc.values}\r\n              onChange={bcc.onChange}\r\n              rightElement={\r\n                bcc.values.length > 0 ? (\r\n                  <Button\r\n                    onClick={() => bcc.clear()}\r\n                    icon=\"cross\"\r\n                    minimal={true}\r\n                  />\r\n                ) : null\r\n              }\r\n              addOnBlur={true}\r\n              tagProps={{ minimal: true }}\r\n              disabled={!canEdit}\r\n            />\r\n          </div>\r\n\r\n          <RichTextEditor\r\n            editorClassName={\"email-body-editor\"}\r\n            placeholder=\"Body...\"\r\n            style={{ minHeight: \"400px\" }}\r\n            spellCheck={true}\r\n            onChange={onBodyChange}\r\n            value={body}\r\n            disabled={!canEdit}\r\n          />\r\n          <div style={{ marginTop: \"10px\", ...inputStyle, width: \"auto\" }}>\r\n            <TagInput\r\n              placeholder=\"Add tags to identify this email\"\r\n              leftIcon=\"tag\"\r\n              rightElement={\r\n                tags.values.length > 0 ? (\r\n                  <Button\r\n                    onClick={() => tags.clear()}\r\n                    icon=\"cross\"\r\n                    minimal={true}\r\n                  />\r\n                ) : null\r\n              }\r\n              values={tags.values}\r\n              onChange={tags.onChange}\r\n              addOnBlur={true}\r\n              tagProps={{ minimal: true }}\r\n              disabled={!canEdit}\r\n            />\r\n          </div>\r\n          <InputGroup\r\n            rightElement={\r\n              <Button\r\n                onClick={save}\r\n                intent={Intent.PRIMARY}\r\n                text={`Save as v${versions.length + 1}`}\r\n                disabled={!canEdit}\r\n              />\r\n            }\r\n            placeholder=\"Commit message\"\r\n            leftIcon=\"info-sign\"\r\n            value={commitMessage.value}\r\n            onChange={commitMessage.onChange}\r\n            disabled={!canEdit}\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useState, useEffect } from \"react\";\r\n\r\nexport default function useMedia(queries, values, defaultValue) {\r\n  // Array containing a media query list for each query\r\n  const mediaQueryLists = queries.map((q) => window.matchMedia(q));\r\n\r\n  // Function that gets value based on matching media query\r\n  const getValue = () => {\r\n    // Get index of first media query that matches\r\n    const index = mediaQueryLists.findIndex((mql) => mql.matches);\r\n    // Return related value or defaultValue if none\r\n    return typeof values[index] !== \"undefined\" ? values[index] : defaultValue;\r\n  };\r\n\r\n  // State and setter for matched value\r\n  const [value, setValue] = useState(getValue);\r\n\r\n  useEffect(\r\n    () => {\r\n      // Event listener callback\r\n      // Note: By defining getValue outside of useEffect we ensure that it has ...\r\n      // ... current values of hook args (as this hook callback is created once on mount).\r\n      const handler = () => setValue(getValue);\r\n      // Set a listener for each media query with above handler as callback.\r\n      mediaQueryLists.forEach((mql) => mql.addListener(handler));\r\n      // Remove listeners on cleanup\r\n      return () =>\r\n        mediaQueryLists.forEach((mql) => mql.removeListener(handler));\r\n    },\r\n    [] // Empty array ensures effect is only run on mount and unmount\r\n  );\r\n\r\n  return value;\r\n}\r\n","import { useState } from \"react\";\r\n\r\nexport default function useDateInput(initialDate) {\r\n  const [value, setValue] = useState(initialDate || null);\r\n\r\n  function onChange(date) {\r\n    setValue(date);\r\n  }\r\n\r\n  function set(date) {\r\n    setValue(new Date(date));\r\n  }\r\n  function clear() {\r\n    setValue(null);\r\n  }\r\n\r\n  return {\r\n    value: value,\r\n    onChange: onChange,\r\n    set: set,\r\n    clear: clear,\r\n  };\r\n}\r\n","let accessToken = \"\";\r\n\r\nexport function setAccessToken(token) {\r\n  accessToken = token;\r\n}\r\nexport function getAccessToken() {\r\n  return accessToken;\r\n}\r\n","import React, { useContext, useState } from \"react\";\r\nimport { InputGroup, Button, Intent, Tooltip } from \"@blueprintjs/core\";\r\nimport useFormInput from \"../hooks/useFormInput\";\r\nimport { BASE_URL } from \"../constants\";\r\nimport axios from \"axios\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { store, actions } from \"../store\";\r\nimport { setAccessToken } from \"../accessToken\";\r\nimport utils from \"../utils\";\r\nimport { AppToaster } from \"../toaster\";\r\n\r\nexport default function Login() {\r\n  const { dispatch } = useContext(store);\r\n\r\n  const username = useFormInput(\"\");\r\n  const password = useFormInput(\"\");\r\n  const history = useHistory();\r\n  const [showPassword, setShowPassword] = useState(false);\r\n\r\n  async function login() {\r\n    let redirect = null;\r\n    try {\r\n      const search = utils.searchToJSON(history.location.search);\r\n      redirect = search.redirect || \"/create\";\r\n    } catch {\r\n      redirect = \"/create\";\r\n    }\r\n\r\n    let data = {\r\n      username: username.value,\r\n      password: password.value,\r\n    };\r\n    try {\r\n      let result = await axios.post(BASE_URL + \"/api/v1/auth/login\", data, {\r\n        withCredentials: true,\r\n      });\r\n      const { accessToken, user } = result.data;\r\n      if (accessToken) {\r\n        setAccessToken(accessToken);\r\n        dispatch({ type: actions.SET_USER, payload: user });\r\n        history.push(redirect);\r\n      } else {\r\n        console.log(\"Invalid login\");\r\n      }\r\n    } catch (err) {\r\n      console.log(err.message);\r\n      if (err.response) {\r\n        console.log(err.response.status);\r\n        if (err.response.status === 404) {\r\n          AppToaster.show({\r\n            message: \"User does not exist.\",\r\n            intent: Intent.DANGER,\r\n          });\r\n        } else if (err.response.status === 401) {\r\n          AppToaster.show({\r\n            message: \"Incorrect password.\",\r\n            intent: Intent.DANGER,\r\n          });\r\n        } else {\r\n          AppToaster.show({\r\n            message: \"There was an error. Please try again.\",\r\n            intent: Intent.DANGER,\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  function goSignup() {\r\n    if (history.location.search) {\r\n      const search = utils.searchToJSON(history.location.search);\r\n      let redirect = search.redirect;\r\n      history.push(`/signup?redirect=${redirect}`);\r\n    } else {\r\n      history.push(\"/signup\");\r\n    }\r\n  }\r\n  function handleLockClick() {\r\n    setShowPassword(!showPassword);\r\n  }\r\n\r\n  const lockButton = (\r\n    <Tooltip content={`${showPassword ? \"Hide\" : \"Show\"} Password`}>\r\n      <Button\r\n        icon={showPassword ? \"unlock\" : \"lock\"}\r\n        intent={Intent.WARNING}\r\n        minimal={true}\r\n        onClick={handleLockClick}\r\n      />\r\n    </Tooltip>\r\n  );\r\n\r\n  return (\r\n    <div>\r\n      <div\r\n        style={{\r\n          width: \"550px\",\r\n          height: \"auto\",\r\n          position: \"absolute\",\r\n          top: \"50%\",\r\n          left: \"50%\",\r\n          transform: \"translate(-50%, -50%)\",\r\n          padding: \"30px\",\r\n        }}\r\n      >\r\n        <h1>Log in</h1>\r\n        <InputGroup\r\n          style={{ marginBottom: \"20px\" }}\r\n          placeholder=\"Username\"\r\n          value={username.value}\r\n          onChange={username.onChange}\r\n        />\r\n        <InputGroup\r\n          style={{ marginBottom: \"20px\" }}\r\n          placeholder=\"Password\"\r\n          value={password.value}\r\n          onChange={password.onChange}\r\n          rightElement={lockButton}\r\n          type={showPassword ? \"text\" : \"password\"}\r\n        />\r\n        <div style={{ textAlign: \"right\" }}>\r\n          <Button\r\n            style={{ marginRight: \"10px\" }}\r\n            text=\"Sign up\"\r\n            onClick={goSignup}\r\n          />\r\n          <Button text=\"Log in\" onClick={login} intent={Intent.PRIMARY} />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useContext, useState } from \"react\";\r\nimport useFormInput from \"../hooks/useFormInput\";\r\nimport { InputGroup, Button, Intent, Tooltip } from \"@blueprintjs/core\";\r\nimport axios from \"axios\";\r\nimport { BASE_URL } from \"../constants\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { store, actions } from \"../store\";\r\nimport { setAccessToken } from \"../accessToken\";\r\nimport utils from \"../utils\";\r\nimport { AppToaster } from \"../toaster\";\r\n\r\nexport default function Signup() {\r\n  const { dispatch } = useContext(store);\r\n\r\n  const username = useFormInput(\"\");\r\n  const password = useFormInput(\"\");\r\n  const firstName = useFormInput(\"\");\r\n  const lastName = useFormInput(\"\");\r\n  const email = useFormInput(\"\");\r\n  const history = useHistory();\r\n  const [showPassword, setShowPassword] = useState(false);\r\n\r\n  async function signup() {\r\n    let redirect = null;\r\n    try {\r\n      const search = utils.searchToJSON(history.location.search);\r\n      redirect = search.redirect || \"/create\";\r\n    } catch {\r\n      redirect = \"/create\";\r\n    }\r\n\r\n    let data = {\r\n      username: username.value,\r\n      password: password.value,\r\n      firstName: firstName.value,\r\n      lastName: lastName.value,\r\n      email: email.value,\r\n    };\r\n    try {\r\n      let res = await axios.post(BASE_URL + \"/api/v1/auth/signup\", data);\r\n      const { user, accessToken } = res.data;\r\n      setAccessToken(accessToken);\r\n      dispatch({ type: actions.SET_USER, payload: user });\r\n\r\n      history.push(redirect);\r\n    } catch (err) {\r\n      console.log(err.message);\r\n      if (err.response) {\r\n        if (err.response.status === 422) {\r\n          AppToaster.show({\r\n            message: err.response.data.message,\r\n            intent: Intent.DANGER,\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  function goLogin() {\r\n    if (history.location.search) {\r\n      const search = utils.searchToJSON(history.location.search);\r\n      let redirect = search.redirect;\r\n      history.push(`/login?redirect=${redirect}`);\r\n    } else {\r\n      history.push(\"/login\");\r\n    }\r\n  }\r\n\r\n  function handleLockClick() {\r\n    setShowPassword(!showPassword);\r\n  }\r\n\r\n  const lockButton = (\r\n    <Tooltip content={`${showPassword ? \"Hide\" : \"Show\"} Password`}>\r\n      <Button\r\n        icon={showPassword ? \"unlock\" : \"lock\"}\r\n        intent={Intent.WARNING}\r\n        minimal={true}\r\n        onClick={handleLockClick}\r\n      />\r\n    </Tooltip>\r\n  );\r\n  const inputStyle = { marginBottom: \"20px\" };\r\n  return (\r\n    <div>\r\n      <div\r\n        style={{\r\n          width: \"550px\",\r\n          height: \"auto\",\r\n          position: \"absolute\",\r\n          top: \"50%\",\r\n          left: \"50%\",\r\n          transform: \"translate(-50%, -50%)\",\r\n          padding: \"30px\",\r\n        }}\r\n      >\r\n        <h1>Sign up</h1>\r\n        <InputGroup\r\n          style={inputStyle}\r\n          value={firstName.value}\r\n          onChange={firstName.onChange}\r\n          placeholder=\"First Name\"\r\n        />\r\n        <InputGroup\r\n          style={inputStyle}\r\n          value={lastName.value}\r\n          onChange={lastName.onChange}\r\n          placeholder=\"Last Name\"\r\n        />\r\n        <InputGroup\r\n          style={inputStyle}\r\n          value={email.value}\r\n          onChange={email.onChange}\r\n          placeholder=\"Email\"\r\n        />\r\n        <InputGroup\r\n          style={inputStyle}\r\n          value={username.value}\r\n          onChange={username.onChange}\r\n          placeholder=\"Username\"\r\n        />\r\n        <InputGroup\r\n          style={inputStyle}\r\n          value={password.value}\r\n          onChange={password.onChange}\r\n          placeholder=\"Password\"\r\n          rightElement={lockButton}\r\n          type={showPassword ? \"text\" : \"password\"}\r\n        />\r\n        <div style={{ textAlign: \"right\" }}>\r\n          <Button\r\n            text=\"Log in\"\r\n            onClick={goLogin}\r\n            style={{ marginRight: \"10px\" }}\r\n          />\r\n          <Button text=\"Sign up\" onClick={signup} intent={Intent.PRIMARY} />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useContext } from \"react\";\r\nimport { InputGroup, Button, Intent, Tooltip } from \"@blueprintjs/core\";\r\nimport useFormInput from \"../hooks/useFormInput\";\r\nimport { BASE_URL } from \"../constants\";\r\nimport axios from \"axios\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { AppToaster } from \"../toaster\";\r\nimport { setAccessToken } from \"../accessToken\";\r\nimport { store, actions } from \"../store\";\r\n\r\nexport default function OrgSignup() {\r\n  const {  dispatch } = useContext(store);\r\n  const history = useHistory();\r\n  const username = useFormInput(\"\");\r\n  const firstName = useFormInput(\"\");\r\n  const lastName = useFormInput(\"\");\r\n  const password = useFormInput(\"\");\r\n  const email = useFormInput(\"\");\r\n  const [showPassword, setShowPassword] = useState(false);\r\n\r\n  const orgName = useFormInput(\"\");\r\n\r\n  const [stepNum, setStepNum] = useState(0);\r\n\r\n  async function create() {\r\n    let user = null;\r\n    const signupData = {\r\n      username: username.value,\r\n      password: password.value,\r\n      email: email.value,\r\n      firstName: firstName.value,\r\n      lastName: lastName.value,\r\n    };\r\n\r\n    try {\r\n      let result = await axios.post(\r\n        `${BASE_URL}/api/v1/auth/signup`,\r\n        signupData\r\n      );\r\n\r\n      let { accessToken } = result.data;\r\n      user = result.data.user;\r\n      if (!accessToken || !user) {\r\n        // Something went wrong\r\n        AppToaster.show({\r\n          message:\r\n            \"There was an error creating your account. Please try again later.\",\r\n          intent: Intent.DANGER,\r\n        });\r\n        return;\r\n      }\r\n\r\n      setAccessToken(accessToken);\r\n      dispatch({ type: actions.SET_USER, payload: user });\r\n    } catch (err) {\r\n      if (err.response.status === 422) {\r\n        AppToaster.show({\r\n          message: err.response.data.message,\r\n          intent: Intent.DANGER,\r\n        });\r\n      }\r\n    }\r\n\r\n    const orgData = {\r\n      name: orgName.value,\r\n      admins: [user._id],\r\n    };\r\n\r\n    try {\r\n      let result = await axios.post(`${BASE_URL}/api/v1/organization`, orgData);\r\n      let { name } = result.data.organization;\r\n      AppToaster.show({\r\n        message:\r\n          \"Your account and organization have been created. Redirecting to admin page.\",\r\n        intent: Intent.SUCCESS,\r\n      });\r\n      setTimeout(() => {\r\n        history.push(`${name}/admin`);\r\n      }, 3000);\r\n    } catch (err) {\r\n      console.log(err.messsage);\r\n      AppToaster.show({\r\n        message:\r\n          \"There was an error creating the organization. Please try again later.\",\r\n        intent: Intent.DANGER,\r\n      });\r\n    }\r\n  }\r\n\r\n  function validateForm() {\r\n    if (firstName.value.trim() === \"\") return \"First name cannot be blank.\";\r\n    if (lastName.value.trim() === \"\") return \"Last name cannot be blank.\";\r\n    if (email.value.trim() === \"\") return \"Email cannot be blank.\";\r\n    if (username.value.trim() === \"\") return \"Username cannot be blank.\";\r\n    if (password.value.trim() === \"\") return \"Password cannot be blank.\";\r\n  }\r\n\r\n  const inputStyle = { marginBottom: \"20px\" };\r\n  const changeStepNum = (curr, next) => () => {\r\n    console.log(curr, next);\r\n    if (curr === 0) {\r\n      // Check for valid form entries\r\n      let errorMessage = validateForm();\r\n      if (errorMessage) {\r\n        AppToaster.show({\r\n          message: errorMessage,\r\n          intent: Intent.DANGER,\r\n        });\r\n      } else {\r\n        setStepNum(next);\r\n      }\r\n    } else {\r\n      setStepNum(next);\r\n    }\r\n  };\r\n\r\n  function handleLockClick() {\r\n    setShowPassword(!showPassword);\r\n  }\r\n  const lockButton = (\r\n    <Tooltip content={`${showPassword ? \"Hide\" : \"Show\"} Password`}>\r\n      <Button\r\n        icon={showPassword ? \"unlock\" : \"lock\"}\r\n        intent={Intent.WARNING}\r\n        minimal={true}\r\n        onClick={handleLockClick}\r\n      />\r\n    </Tooltip>\r\n  );\r\n  if (stepNum === 0) {\r\n    return (\r\n      <div>\r\n        <div\r\n          style={{\r\n            width: \"550px\",\r\n            height: \"auto\",\r\n            position: \"absolute\",\r\n            top: \"50%\",\r\n            left: \"50%\",\r\n            transform: \"translate(-50%, -50%)\",\r\n            padding: \"30px\",\r\n          }}\r\n        >\r\n          <h1>First, create an account</h1>\r\n          <InputGroup\r\n            placeholder=\"First Name\"\r\n            value={firstName.value}\r\n            onChange={firstName.onChange}\r\n            style={inputStyle}\r\n          />\r\n          <InputGroup\r\n            placeholder=\"Last Name\"\r\n            value={lastName.value}\r\n            onChange={lastName.onChange}\r\n            style={inputStyle}\r\n          />\r\n          <InputGroup\r\n            placeholder=\"Email\"\r\n            value={email.value}\r\n            onChange={email.onChange}\r\n            style={inputStyle}\r\n          />\r\n          <InputGroup\r\n            placeholder=\"Username\"\r\n            value={username.value}\r\n            onChange={username.onChange}\r\n            style={inputStyle}\r\n          />\r\n          <InputGroup\r\n            placeholder=\"Password\"\r\n            value={password.value}\r\n            onChange={password.onChange}\r\n            style={inputStyle}\r\n            rightElement={lockButton}\r\n            type={showPassword ? \"text\" : \"password\"}\r\n          />\r\n          <div style={{ textAlign: \"right\" }}>\r\n            <Button\r\n              intent={Intent.PRIMARY}\r\n              onClick={changeStepNum(0, 1)}\r\n              text=\"Next\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  } else if (stepNum === 1) {\r\n    return (\r\n      <div>\r\n        <div\r\n          style={{\r\n            width: \"550px\",\r\n            height: \"auto\",\r\n            position: \"absolute\",\r\n            top: \"50%\",\r\n            left: \"50%\",\r\n            transform: \"translate(-50%, -50%)\",\r\n            padding: \"30px\",\r\n          }}\r\n        >\r\n          <h1>Create organization</h1>\r\n          <p>You will automatically added as an admin to this organization.</p>\r\n          <InputGroup\r\n            placeholder=\"Organization Name\"\r\n            value={orgName.value}\r\n            onChange={orgName.onChange}\r\n            style={inputStyle}\r\n          />\r\n          <div style={{ textAlign: \"right\" }}>\r\n            <Button\r\n              style={{ marginRight: \"5px\" }}\r\n              onClick={changeStepNum(1, 0)}\r\n              text=\"Go Back\"\r\n            />\r\n            <Button\r\n              intent={Intent.PRIMARY}\r\n              onClick={create}\r\n              text=\"Create Organization\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\nimport {\r\n  Button,\r\n  HTMLTable,\r\n  Intent,\r\n  Spinner,\r\n  Callout,\r\n  Code,\r\n} from \"@blueprintjs/core\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { BASE_URL } from \"../constants\";\r\nimport { store } from \"../store\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nexport default function Admin() {\r\n  const history = useHistory();\r\n  const { state } = useContext(store);\r\n  const { orgName } = useParams();\r\n  const [authorized, setAuthorized] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n  const [users, setUsers] = useState([]);\r\n  const [admins, setAdmins] = useState([]);\r\n\r\n  useEffect(() => {\r\n    (async function () {\r\n      // Check if user is an admin\r\n      try {\r\n        let { isAdmin } = (\r\n          await axios.get(`${BASE_URL}/api/v1/organization/${orgName}/isAdmin`)\r\n        ).data;\r\n\r\n        if (!isAdmin) {\r\n          setLoading(false);\r\n          return;\r\n        } else {\r\n          // User is an admin, authorized to see this page\r\n          setAuthorized(true);\r\n        }\r\n      } catch (err) {\r\n        if (err.response) {\r\n          if (err.response.status === 401) {\r\n            setLoading(false);\r\n          }\r\n        }\r\n      }\r\n\r\n      // Fetch members of this organization\r\n      axios\r\n        .get(`${BASE_URL}/api/v1/organization/${orgName}/users`)\r\n        .then((res) => {\r\n          setUsers(res.data.users);\r\n          setAdmins(res.data.admins);\r\n        });\r\n\r\n      setLoading(false);\r\n    })();\r\n  }, [orgName]);\r\n\r\n  const goto = (destination) => () => {\r\n    history.push(destination);\r\n  };\r\n  if (loading) {\r\n    return (\r\n      <div\r\n        style={{\r\n          width: \"min-content\",\r\n          position: \"absolute\",\r\n          top: \"50%\",\r\n          left: \"50%\",\r\n          transform: \"translate(-50%, -50%)\",\r\n        }}\r\n      >\r\n        <Spinner intent={Intent.PRIMARY} />\r\n      </div>\r\n    );\r\n  }\r\n  if (!authorized) {\r\n    return (\r\n      <div\r\n        style={{\r\n          width: \"min-content\",\r\n          position: \"absolute\",\r\n          top: \"50%\",\r\n          left: \"50%\",\r\n          transform: \"translate(-50%, -50%)\",\r\n        }}\r\n      >\r\n        <Callout icon=\"disable\" title=\"Not authorized\">\r\n          <div style={{ width: \"350px\" }}>\r\n            {state.user ? (\r\n              <>\r\n                <p>\r\n                  You're not an admin of this organization. If you beleive you\r\n                  should be, please request permissions from a current admin.\r\n                </p>\r\n                <p>\r\n                  Currently logged in as:{\" \"}\r\n                  <Code style={{ marginLeft: \"5px\" }}>\r\n                    {state.user.username}\r\n                  </Code>\r\n                </p>\r\n                <Button\r\n                  intent={Intent.PRIMARY}\r\n                  text=\"Request Access\"\r\n                  disabled\r\n                />\r\n              </>\r\n            ) : (\r\n              <>\r\n                <p style={{ width: \"350px\" }}>\r\n                  You're currently not logged in. You must be logged in to\r\n                  continue.{\" \"}\r\n                </p>\r\n                <Button\r\n                  intent={Intent.PRIMARY}\r\n                  onClick={goto(`/login?redirect=/${orgName}/dashboard`)}\r\n                  text=\"Log in\"\r\n                />\r\n              </>\r\n            )}\r\n          </div>\r\n        </Callout>\r\n      </div>\r\n    );\r\n  }\r\n  return (\r\n    <div style={{padding: \"20px\"}}>\r\n      <h1>Members</h1>\r\n      <HTMLTable>\r\n        <thead>\r\n          <tr>\r\n            <th>First Name</th>\r\n            <th>Last Name</th>\r\n            <th>Username</th>\r\n            <th>Email</th>\r\n            <th>Role</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {admins.map((user) => (\r\n            <tr>\r\n              <td>{user.firstName}</td>\r\n              <td>{user.lastName}</td>\r\n              <td>{user.username}</td>\r\n              <td>{user.email}</td>\r\n              <td>Admin</td>\r\n            </tr>\r\n          ))}\r\n          {users.map((user) => (\r\n            <tr>\r\n              <td>{user.firstName}</td>\r\n              <td>{user.lastName}</td>\r\n              <td>{user.username}</td>\r\n              <td>{user.email}</td>\r\n              <td>Member</td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </HTMLTable>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { InputGroup, Button, Intent } from \"@blueprintjs/core\";\r\nimport useFormInput from \"../hooks/useFormInput\";\r\nimport axios from \"axios\";\r\nimport { BASE_URL } from \"../constants\";\r\nimport { AppToaster } from \"../toaster\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nexport default function OrgJoin() {\r\n  const history = useHistory();\r\n  const orgName = useFormInput(\"\");\r\n\r\n  async function join() {\r\n    if (orgName.value.trim() === \"\") {\r\n      AppToaster.show({\r\n        message: \"Organization name cannot be blank.\",\r\n        intent: Intent.DANGER,\r\n      });\r\n      return;\r\n    }\r\n    try {\r\n      let name = orgName.value.replace(/ /g, \"-\");\r\n      await axios.patch(`${BASE_URL}/api/v1/organization/${name}/users`);\r\n      AppToaster.show({\r\n        message: `You've sucessfully joined ${name}. Redirecting to dashboard.`,\r\n        intent: Intent.SUCCESS,\r\n      });\r\n      setTimeout(() => {\r\n        history.push(`/${name}/dashboard`);\r\n      }, 3000);\r\n    } catch (err) {\r\n      if (err.response) {\r\n        if (err.response.status === 404) {\r\n          AppToaster.show({\r\n            message: \"Organization does not exist.\",\r\n            intent: Intent.DANGER,\r\n          });\r\n        } else if (err.response.status === 401) {\r\n          AppToaster.show({\r\n            message: \"You need to be logged in to join an organization.\",\r\n            intent: Intent.DANGER,\r\n            action: {\r\n              onClick: () => history.push(\"/login?redirect=/join\"),\r\n              text: \"Log in\",\r\n            },\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div\r\n        style={{\r\n          width: \"550px\",\r\n          height: \"auto\",\r\n          position: \"absolute\",\r\n          top: \"50%\",\r\n          left: \"50%\",\r\n          transform: \"translate(-50%, -50%)\",\r\n          padding: \"30px\",\r\n        }}\r\n      >\r\n        <h1>Join an organization</h1>\r\n        <p>Enter the organization name you want to join. </p>\r\n        <InputGroup\r\n          style={{ marginBottom: \"20px\" }}\r\n          placeholder=\"my-cool-organization\"\r\n          value={orgName.value.replace(/ /g, \"-\")}\r\n          onChange={orgName.onChange}\r\n        />\r\n        <div style={{ textAlign: \"right\" }}>\r\n          <Button intent={Intent.PRIMARY} onClick={join} text=\"Join\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useContext, useState } from \"react\";\r\nimport {\r\n  Navbar,\r\n  NavbarGroup,\r\n  NavbarDivider,\r\n  Button,\r\n  Alignment,\r\n  NavbarHeading,\r\n  Classes,\r\n  Intent,\r\n  Menu,\r\n  MenuItem,\r\n  Popover,\r\n  Position,\r\n  Divider,\r\n} from \"@blueprintjs/core\";\r\nimport { store, actions } from \"../store\";\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { BASE_URL } from \"../constants\";\r\nimport { setAccessToken } from \"../accessToken\";\r\n\r\nexport default function Nav() {\r\n  const { state, dispatch } = useContext(store);\r\n  const history = useHistory();\r\n  const { orgName } = useParams();\r\n  const [organizations, setOrganizations] = useState([]);\r\n\r\n  const goto = (destination) => () => {\r\n    history.push(destination);\r\n  };\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .get(`${BASE_URL}/api/v1/user/organizations`)\r\n      .then((response) => {\r\n        setOrganizations(response.data.organizations);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err.message);\r\n      });\r\n  }, []);\r\n\r\n  async function logout() {\r\n    if (state.user) {\r\n      try {\r\n        await axios.post(`${BASE_URL}/api/v1/auth/logout`, null);\r\n        dispatch({ type: actions.CLEAR_USER });\r\n        setAccessToken(null);\r\n        history.push(\"/\");\r\n      } catch (err) {\r\n        console.log(err.message);\r\n      }\r\n    }\r\n  }\r\n\r\n  async function logoutAll() {\r\n    if (state.user) {\r\n      try {\r\n        await axios.post(`${BASE_URL}/api/v1/auth/logout-all`);\r\n        dispatch({ type: actions.CLEAR_USER });\r\n        setAccessToken(null);\r\n        history.push(\"/\");\r\n      } catch (err) {\r\n        console.log(err.message);\r\n      }\r\n    }\r\n  }\r\n\r\n  async function createDraft() {\r\n    try {\r\n      let res = await axios.post(BASE_URL + \"/api/v1/draft\", {\r\n        orgName,\r\n      });\r\n      let { draft } = res.data;\r\n      let draftId = draft._id;\r\n      history.push(`/${orgName}/compose?draftId=${draftId}`);\r\n    } catch (err) {\r\n      console.log(err.messsage);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Navbar>\r\n      <NavbarGroup align={Alignment.LEFT}>\r\n        <NavbarHeading>Followup</NavbarHeading>\r\n        <NavbarDivider />\r\n        <Popover\r\n          modifiers={{ arrow: { enabled: false } }}\r\n          content={\r\n            <Menu>\r\n              {organizations.map((organization) =>\r\n                organization.name === orgName ? null : (\r\n                  <MenuItem\r\n                    onClick={goto(`/${organization.name}/dashboard`)}\r\n                    key={organization._id}\r\n                    text={organization.name}\r\n                  />\r\n                )\r\n              )}\r\n              <Divider />\r\n              <MenuItem\r\n                onClick={goto(\"/create\")}\r\n                icon=\"plus\"\r\n                text=\"Create Organization\"\r\n              />\r\n            </Menu>\r\n          }\r\n          target={<Button text={orgName} rightIcon=\"double-caret-vertical\" />}\r\n          position={Position.BOTTOM_RIGHT}\r\n          minimal\r\n        />\r\n        <NavbarDivider />\r\n        {state.user && orgName && (\r\n          <>\r\n            <Button\r\n              onClick={goto(`/${orgName}/dashboard`)}\r\n              className={Classes.MINIMAL}\r\n              icon=\"dashboard\"\r\n              text=\"Dashboard\"\r\n            />\r\n            <Button\r\n              onClick={createDraft}\r\n              className={Classes.MINIMAL}\r\n              icon=\"application\"\r\n              text=\"Create Draft\"\r\n            />\r\n          </>\r\n        )}\r\n      </NavbarGroup>\r\n      <NavbarGroup align={Alignment.RIGHT}>\r\n        {state.user ? (\r\n          <>\r\n            <Button icon=\"notifications\" className={Classes.MINIMAL} />\r\n            <Popover\r\n              content={\r\n                <Menu>\r\n                  <MenuItem onClick={logout} icon=\"log-out\" text=\"Log out\" />\r\n                  <MenuItem\r\n                    onClick={logoutAll}\r\n                    icon=\"globe\"\r\n                    text=\"Log out of all devices\"\r\n                  />\r\n                  <MenuItem icon=\"cog\" text=\"Settings\" />\r\n                </Menu>\r\n              }\r\n              position={Position.BOTTOM_LEFT}\r\n            >\r\n              <Button icon=\"caret-down\" className={Classes.MINIMAL} />\r\n            </Popover>\r\n          </>\r\n        ) : (\r\n          <>\r\n            <Button\r\n              onClick={goto(\"/signup\")}\r\n              className={Classes.MINIMAL}\r\n              text=\"Sign up\"\r\n            />\r\n            <Button\r\n              onClick={goto(\"/login\")}\r\n              intent={Intent.PRIMARY}\r\n              rightIcon=\"log-in\"\r\n              text=\"Log in\"\r\n            />\r\n          </>\r\n        )}\r\n      </NavbarGroup>\r\n    </Navbar>\r\n  );\r\n}\r\n","import React, { useContext } from \"react\";\r\nimport { InputGroup, Button, Intent } from \"@blueprintjs/core\";\r\nimport useFormInput from \"../hooks/useFormInput\";\r\nimport axios from \"axios\";\r\nimport { BASE_URL } from \"../constants\";\r\nimport { store } from \"../store\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { AppToaster } from \"../toaster\";\r\n\r\nexport default function OrgJoin() {\r\n  const history = useHistory();\r\n  const orgName = useFormInput(\"\");\r\n  const { state } = useContext(store);\r\n\r\n  async function create() {\r\n    if (!state.user) {\r\n      // User must be logged in to create an organization\r\n      AppToaster.show({\r\n        message: \"You need an account to create an organization.\",\r\n        action: {\r\n          onClick: () => history.push(\"/get-started\"),\r\n          text: \"Get Started\",\r\n        },\r\n        intent: Intent.DANGER,\r\n      });\r\n      return;\r\n    }\r\n\r\n    if (orgName.value.trim() === \"\") {\r\n      AppToaster.show({\r\n        message: \"Organization name cannot be blank\",\r\n        intent: Intent.DANGER,\r\n      });\r\n      return;\r\n    }\r\n\r\n    const data = {\r\n      name: orgName.value,\r\n      admins: [state.user._id],\r\n    };\r\n\r\n    try {\r\n      let result = await axios.post(`${BASE_URL}/api/v1/organization/`, data);\r\n      AppToaster.show({\r\n        message:\r\n          \"Successfully created organization. Redirecting to admin page.\",\r\n        intent: Intent.SUCCESS,\r\n      });\r\n      setTimeout(() => {\r\n        history.push(`/${result.data.organization.name}/admin`);\r\n      }, 3000);\r\n    } catch (err) {\r\n      AppToaster.show({\r\n        message: err.message,\r\n        intent: Intent.DANGER,\r\n      });\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div\r\n        style={{\r\n          width: \"550px\",\r\n          height: \"auto\",\r\n          position: \"absolute\",\r\n          top: \"50%\",\r\n          left: \"50%\",\r\n          transform: \"translate(-50%, -50%)\",\r\n          padding: \"30px\",\r\n        }}\r\n      >\r\n        <h1>Create an organization</h1>\r\n        <p>You will automatically be added as an admin to this organization.</p>\r\n        <InputGroup\r\n          placeholder=\"Organization Name\"\r\n          value={orgName.value}\r\n          onChange={orgName.onChange}\r\n          style={{ marginBottom: \"20px\" }}\r\n        />\r\n        <div style={{ textAlign: \"right\" }}>\r\n          <Button intent={Intent.PRIMARY} onClick={create} text=\"Create\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nconst imgStyle = {\r\n  boxShadow: \"0 8px 12px -6px black\",\r\n  width: \"700px\",\r\n};\r\nconst pStyle = {\r\n  marginTop: \"30px\",\r\n};\r\nexport default function Product() {\r\n  return (\r\n    <div style={{ textAlign: \"center\" }}>\r\n      <h1>Product</h1>\r\n      <p style={pStyle}>\r\n        View current drafts and sent emails at a glance. Search for particular\r\n        emails.\r\n      </p>\r\n      <img\r\n        style={imgStyle}\r\n        alt=\"Screen shot of application dashboard.\"\r\n        src={require(\"../assets/images/dashboard-demo.png\")}\r\n      />\r\n\r\n      <p style={pStyle}>Collaboratively compose drafts. </p>\r\n      <img\r\n        style={imgStyle}\r\n        alt=\"Screen shot of compose draft view\"\r\n        src={require(\"../assets/images/composer-demo.png\")}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport {\r\n  Navbar,\r\n  NavbarGroup,\r\n  NavbarDivider,\r\n  NavbarHeading,\r\n  Alignment,\r\n  Button,\r\n  Intent,\r\n} from \"@blueprintjs/core\";\r\n\r\nexport default function StatelessNav() {\r\n  const history = useHistory();\r\n\r\n  const goto = (destination) => () => {\r\n    history.push(destination);\r\n  };\r\n\r\n  return (\r\n    <Navbar>\r\n      <NavbarGroup align={Alignment.LEFT}>\r\n        <NavbarHeading>Followup</NavbarHeading>\r\n        <NavbarDivider />\r\n        <Button text=\"Home\" onClick={goto(\"/\")} minimal />\r\n        <Button text=\"Learn More\" onClick={goto(\"/product\")} minimal />\r\n      </NavbarGroup>\r\n      <NavbarGroup align={Alignment.RIGHT}>\r\n        <Button text=\"Log in\" onClick={goto(\"/login\")} minimal />\r\n        <Button\r\n          text=\"Sign up\"\r\n          onClick={goto(\"/signup\")}\r\n          outlined\r\n          intent={Intent.PRIMARY}\r\n        />\r\n      </NavbarGroup>\r\n    </Navbar>\r\n  );\r\n}\r\n","import React, { useState, useEffect, useContext } from \"react\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport \"./App.css\";\n\nimport Home from \"./components/Home.js\";\nimport Dashboard from \"./components/Dashboard.js\";\nimport Composer from \"./components/Composer\";\nimport Login from \"./components/Login\";\nimport Signup from \"./components/Signup\";\nimport OrgSignup from \"./components/OrgSignup\";\nimport Admin from \"./components/Admin\";\nimport OrgJoin from \"./components/OrgJoin\";\nimport Nav from \"./components/Nav\";\nimport OrgCreate from \"./components/OrgCreate\";\nimport Product from \"./components/Product\";\nimport StatelessNav from \"./components/StatelessNav\";\n\nimport axios from \"axios\";\nimport { BASE_URL } from \"./constants\";\nimport { setAccessToken } from \"./accessToken\";\nimport { store, actions } from \"./store\";\n\nimport { Spinner, Intent, Button } from \"@blueprintjs/core\";\n\nfunction App() {\n  const { dispatch } = useContext(store);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    axios\n      .post(`${BASE_URL}/api/v1/auth/refresh-token`, null, {\n        withCredentials: true,\n      })\n      .then((res) => {\n        const { accessToken, user } = res.data;\n        if (accessToken && user) {\n          setAccessToken(accessToken);\n          dispatch({ type: actions.SET_USER, payload: user });\n        }\n      })\n      .catch((err) => {\n        console.log(err.message);\n      })\n      .finally(() => {\n        setLoading(false);\n      });\n  }, []);\n\n  useEffect(() => {\n    const REFRESH_TIME = 10 * 60 * 1000; // Ten Minutes\n    const interval = setInterval(() => {\n      axios\n        .post(`${BASE_URL}/api/v1/auth/refresh-token`, null, {\n          withCredentials: true,\n        })\n        .then((res) => {\n          if (res.data && res.data.accessToken) {\n            setAccessToken(res.data.accessToken);\n          }\n        })\n        .catch((err) => {\n          console.log(err.message);\n        });\n    }, REFRESH_TIME);\n\n    return () => clearInterval(interval);\n  }, []);\n\n  if (loading) {\n    return (\n      <div\n        style={{\n          width: \"min-content\",\n          position: \"absolute\",\n          top: \"50%\",\n          left: \"50%\",\n          transform: \"translate(-50%, -50%)\",\n        }}\n      >\n        <Spinner intent={Intent.NONE} />\n      </div>\n    );\n  }\n\n  return (\n    <Router>\n      <Switch>\n        <Route path=\"/\" exact>\n          <StatelessNav />\n          <Home />\n        </Route>\n        <Route path=\"/product\">\n          <StatelessNav />\n          <Product />\n        </Route>\n        <Route path=\"/get-started\">\n          <StatelessNav />\n          <OrgSignup />\n        </Route>\n        <Route path=\"/:orgName/admin\">\n          <Nav />\n          <Admin />\n        </Route>\n        <Route path=\"/join\">\n          <Nav />\n          <OrgJoin />\n        </Route>\n        <Route path=\"/create\">\n          <Nav />\n          <OrgCreate />\n        </Route>\n        <Route path=\"/:orgName/dashboard\">\n          <Nav />\n          <Dashboard />\n        </Route>\n        <Route path=\"/:orgName/compose\">\n          <Nav />\n          <Composer />\n        </Route>\n        <Route path=\"/login\" component={Login} />\n        <Route path=\"/signup\" component={Signup} />\n      </Switch>\n    </Router>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport \"@blueprintjs/core/lib/css/blueprint.css\";\nimport \"@blueprintjs/datetime/lib/css/blueprint-datetime.css\";\nimport \"@blueprintjs/select/lib/css/blueprint-select.css\";\nimport \"@blueprintjs/icons/lib/css/blueprint-icons.css\";\nimport \"./index.css\";\nimport axios from \"axios\";\nimport { getAccessToken } from \"./accessToken\";\nimport { StateProvider } from \"./store.js\";\n\n// Add a request interceptor\naxios.interceptors.request.use(\n  function (config) {\n    // Do something before request is sent\n    const accessToken = getAccessToken();\n    if (accessToken) {\n      config.headers[\"authorization\"] = `Bearer ${accessToken}`;\n    }\n    // console.log(config);\n    return config;\n  },\n  function (error) {\n    // Do something with request error\n    return Promise.reject(error);\n  }\n);\n\nReactDOM.render(\n  <React.StrictMode>\n    <StateProvider>\n      <App />\n    </StateProvider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = {\r\n  getJWT: () => {\r\n    const jwtToken = localStorage.getItem(\"JWT_TOKEN\");\r\n    return jwtToken;\r\n  },\r\n  getJWTConfig: () => {\r\n    const jwtToken = localStorage.getItem(\"JWT_TOKEN\");\r\n    const config = {\r\n      headers: {\r\n        Authorization: \"Bearer \" + jwtToken,\r\n      },\r\n    };\r\n    return config;\r\n  },\r\n  setJWT: (token) => {\r\n    localStorage.setItem(\"JWT_TOKEN\", token);\r\n  },\r\n  searchToJSON: (search) => {\r\n    return JSON.parse(\r\n      '{\"' +\r\n        decodeURI(search.substring(1))\r\n          .replace(/\"/g, '\\\\\"')\r\n          .replace(/&/g, '\",\"')\r\n          .replace(/=/g, '\":\"') +\r\n        '\"}'\r\n    );\r\n  },\r\n};\r\n"],"sourceRoot":""}